<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>언네임드 회식 정산 계산기</title>

    <!-- PWA 관련 메타 태그 -->
    <meta name="description" content="회식 정산 계산기 - 테이블별 회식비 정산 도구">
    <meta name="theme-color" content="#7B1FA2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="회식 정산 계산기">
    <meta name="msapplication-TileColor" content="#7B1FA2">

    <!-- PWA 아이콘 -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <link rel="manifest" href="/manifest.json">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/msgpack-lite@0.1.26/dist/msgpack.min.js"></script>
</head>
<body>
    <div class="d-flex">
        <a href="/jungsan/alchol" class="md-btn">일반인 / 술고래 구분 정산기</a>
    </div>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>언네임드 회식 정산 계산기</h1>
        <div style="display: flex; align-items: center; justify-content: end; gap: 0.2rem; flex-wrap: wrap;">
            <a href="/" class="home-button"><span class="material-icons">home</span>앱 목록</a>
            <button id="resetFormBtn" style="margin-left: 1rem;"><span class="material-icons">restart_alt</span>초기화</button>
            <button id="exportJsonBtn" style="margin-left: 0.5rem;"><span class="material-icons">file_upload</span>JSON 내보내기</button>
            <button id="importJsonBtn" style="margin-left: 0.5rem;"><span class="material-icons">file_download</span>JSON 가져오기</button>
            <button id="shareLinkBtn" style="margin-left: 0.5rem;"><span class="material-icons">link</span>링크로 공유</button>
        </div>
    </div>

    <div class="input-group">
        <label for="tableCount">테이블 개수</label>
        <input type="number" id="tableCount" min="1" value="1">
        <button id="createTables">
            <span class="material-icons">add_circle</span>
            테이블 생성
        </button>
    </div>

    <div class="input-group">
        <label for="totalSupport">총 회식 지원비</label>
        <input type="number" id="totalSupport" min="0" value="0">
    </div>

    <div id="tablesContainer"></div>

    <button id="calc-button">
        <span class="material-icons">calculate</span>
        정산 계산하기
    </button>

    <div id="result" class="result"></div>

    <script src="./script.js"></script>

    <!-- PWA Service Worker 등록 -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
