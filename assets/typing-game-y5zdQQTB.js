import{A as e,C as t,D as n,M as r,O as i,S as a,_ as o,b as s,f as c,h as l,j as ee,o as u,p as te,s as d,u as ne,x as re,y as ie}from"./index-CxO5bnR4.js";import{t as f}from"./_plugin-vue_export-helper-9n1O4nl6.js";var p={__name:`GameItem`,props:{text:{type:String,required:!0},type:{type:String,required:!0,validator:e=>[`word`,`syntax`].includes(e)},x:{type:Number,required:!0},y:{type:Number,required:!0},zIndex:{type:Number,required:!0}},setup(t){return(n,i)=>(a(),l(`div`,{class:e([`item`,t.type]),style:ee({position:`absolute`,left:`${t.x}px`,top:`${t.y}px`,zIndex:t.zIndex})},r(t.text),7))}},ae=f(p,[[`__scopeId`,`data-v-9502f183`]]),oe={class:`typing-game-container`},se={id:`game-container`,class:`relative w-full max-w-4xl mx-auto p-4 md:p-6 flex flex-col items-center gap-4`},ce={id:`game-ui`,class:`w-full flex-col items-center gap-4 flex`},le={id:`fullscreen-open-icon`,xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},ue={id:`fullscreen-close-icon`,xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},de={class:`w-full flex justify-between items-center bg-slate-800 p-3 rounded-lg shadow-lg`},fe={class:`text-lg`},pe={id:`score`,class:`font-bold text-2xl text-yellow-300`},me={class:`text-lg`},he={id:`typing-speed`,class:`font-bold text-1xl text-yellow-300`},ge={class:`text-lg`},_e={id:`lives`,class:`font-bold text-2xl text-red-500`},ve=[`disabled`],ye={id:`settings-modal`,class:`absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-20`},be={class:`bg-slate-800 p-8 rounded-xl shadow-2xl w-full max-w-2xl text-center`},xe={class:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-left`},Se={class:`flex flex-col sm:flex-row gap-4 justify-center mb-6`},Ce={id:`game-over-modal`,class:`absolute inset-0 bg-black bg-opacity-80 flex-col items-center justify-center z-20 flex`},we={class:`text-center`},Te={id:`modal-score`,class:`text-2xl text-yellow-400 mb-2`},Ee={id:`modal-typing-speed`,class:`text-xl text-yellow-400 mb-8`},m=f({__name:`index`,setup(ee){let f=i(!0),p=i(!1),m=i(!1),h=i(!1),g=i(!1),_=i(!1),v=i(`neutral`),y=i(0),b=i(5),x=i(0),S=i(!0),C=i(``),w=i(``),T=i(``),E=i(null),D=i(null),O=i(null),k=i([]),A=i(1),j=i(2500),M=i(0),N=i(null),P=i(19999),F=i(9999),I=i([]),L=i([]),R=i(0),z=i(0),B=i(!1),V=0,H=null,U=null,W=null,De=e=>{if(typeof e!=`string`)return 0;let t=0;for(let n=0;n<e.length;n++){let r=e[n],i=r.charCodeAt(0);r===` `?t+=1:i>=44032&&i<=55203?t+=(i-44032)%28==0?2:3:t+=1}return t},G=e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},K=e=>e.split(`
`).map(e=>e.trim()).filter(e=>e),Oe=()=>{b.value>0&&b.value--},ke=e=>{e>0&&(y.value+=e)},q=e=>{let t=k.value.findIndex(t=>t.id===e);t!==-1&&k.value.splice(t,1)},Ae=()=>{S.value||(Oe(),g.value=!0,setTimeout(()=>{g.value=!1},300),b.value<=0&&Ie())},je=()=>{y.value>0&&y.value%50==0&&(A.value+=.2),y.value>0&&y.value%100==0&&j.value>=200&&(j.value-=50,X(),Y())},Me=()=>{M.value+=.1,M.value>0&&(x.value=y.value/M.value*60)},Ne=()=>{S.value||E.value&&k.value.forEach(e=>{let t=e.y<0?A.value*5:A.value;e.y+=t*e.speedMultiplier,e.y+40>=E.value.offsetHeight&&(q(e.id),Ae())})},J=(e,t)=>{let n;if(e===`word`?(R.value>=I.value.length&&(R.value=0,I.value=G([...K(w.value)])),I.value.length>0&&(n=I.value[R.value],R.value++)):(z.value>=L.value.length&&(z.value=0,L.value=G([...K(T.value)])),L.value.length>0&&(n=L.value[z.value],z.value++)),!n||!E.value)return;let r=E.value.offsetWidth,i=n.length*12+24,a,o=!1,s=0;do{o=!1,a=Math.random()*(r-i);for(let e of k.value)if(e.y<40){let t=e.x,n=e.text.length*12+24;if(a<t+n&&a+i>t){o=!0;break}}s++}while(o&&s<20);let c=e===`word`?P.value--:F.value--,l={id:V++,text:n,type:e,x:a,y:-40,zIndex:c,speedMultiplier:t*(5/n.length)};k.value.push(l),N.value=l},Pe=()=>{if(S.value||k.value.length>=7||N.value&&k.value.includes(N.value)&&N.value.y<10)return;let e=K(w.value),t=K(T.value),n=e.length>0,r=t.length>0;if(!(!n&&!r))if(Math.random()<.75&&n||!r){if(B.value){B.value=!1;return}J(`word`,1)}else J(`syntax`,.5),B.value=!0},Y=()=>{H=setInterval(()=>Ne(),16),U=setInterval(()=>Pe(),j.value),W=setInterval(()=>Me(),100)},X=()=>{H&&clearInterval(H),U&&clearInterval(U),W&&clearInterval(W)},Fe=()=>{let e=K(w.value),t=K(T.value);if(e.length===0&&t.length===0){alert(`Please enter at least one word or syntax phrase to start the game.`);return}Z(),y.value=0,b.value=5,A.value=1,j.value=2500,k.value=[],S.value=!1,M.value=0,N.value=null,P.value=19999,F.value=9999,I.value=G([...e]),L.value=G([...t]),R.value=0,z.value=0,B.value=!1,k.value=[],D.value&&(D.value.disabled=!1,D.value.value=``),C.value=``,v.value=`neutral`,V=0,ie(()=>{D.value&&D.value.focus()}),f.value=!1,p.value=!0,m.value=!1,X(),Y()},Ie=()=>{S.value||(S.value=!0,X(),D.value&&(D.value.disabled=!0),m.value=!0)},Le=()=>{X(),m.value=!1,p.value=!1,f.value=!0,S.value=!0},Re=()=>{if(!C.value||C.value.trim()===``){v.value=`neutral`;return}let e=C.value,t=!1;for(let n of k.value){let r=n.type===`syntax`,i,a;if(r?(i=n.text.replace(/\s/g,``),a=e.replace(/\s/g,``)):(i=n.text.trim(),a=e.trim()),i===a){t=!0;break}}v.value=t?`match`:`no-match`},ze=e=>{if(!e)return;let t=null;for(let n of k.value){let r=n.type===`syntax`,i,a;if(r?(i=n.text.replace(/\s/g,``),a=e.replace(/\s/g,``)):(i=n.text.trim(),a=e.trim()),i===a){t=n;break}}t?(ke(De(t.text)),q(t.id),je(),v.value=`neutral`):(_.value=!0,v.value=`no-match`,setTimeout(()=>{_.value=!1,v.value=`neutral`},200)),C.value=``},Be=e=>{!S.value&&e.key===`Enter`&&(e.preventDefault(),ze(C.value))},Z=()=>{let e={words:w.value,syntax:T.value};localStorage.setItem(`typingGameSettings`,JSON.stringify(e))},Ve=()=>{let e=localStorage.getItem(`typingGameSettings`);if(e)try{let t=JSON.parse(e);w.value=typeof t.words==`string`?t.words:``,T.value=typeof t.syntax==`string`?t.syntax:``}catch(e){console.error(`Failed to parse settings from localStorage`,e),Q()}else Q()},Q=()=>{w.value=[`네트워크`,`프로토콜`,`알고리즘`,`데이터베이스`,`서버`,`클라이언트`,`프레임워크`,`라이브러리`].join(`
`),T.value=[`public static void main`,`System.out.println()`,`document.getElementById`,`addEventListener('click', () => {})`].join(`
`)},He=()=>{Z();let e={words:K(w.value),syntax:K(T.value)},t=JSON.stringify(e,null,2),n=new Blob([t],{type:`application/json`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`typing_settings.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},Ue=()=>{O.value.click()},We=e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{try{let t=JSON.parse(e.target.result);Array.isArray(t.words)&&Array.isArray(t.syntax)?(w.value=t.words.join(`
`),T.value=t.syntax.join(`
`),Z()):alert(`Invalid JSON format. The file must contain "words" and "syntax" arrays.`)}catch(e){alert(`Error parsing JSON file: `+e.message)}},n.readAsText(t),e.target.value=``},Ge=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>console.error(`Fullscreen Error: ${e.message}`))},Ke=()=>{h.value=!!document.fullscreenElement},qe=()=>{if(!document.querySelector(`script[src*="tailwindcss"]`)){let e=document.createElement(`script`);e.src=`https://cdn.tailwindcss.com`,document.head.appendChild(e)}if(!document.querySelector(`link[href*="Fira+Code"]`)){let e=document.createElement(`link`);e.rel=`preconnect`,e.href=`https://fonts.googleapis.com`,document.head.appendChild(e);let t=document.createElement(`link`);t.rel=`preconnect`,t.href=`https://fonts.gstatic.com`,t.crossOrigin=`anonymous`,document.head.appendChild(t);let n=document.createElement(`link`);n.href=`https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap`,n.rel=`stylesheet`,document.head.appendChild(n)}},Je=()=>{let e={open:!1},t=new Image;Object.defineProperty(t,`id`,{get:function(){e.open=!0,e.open&&(document.documentElement.innerHTML=``,document.documentElement.style.display=`none`,setInterval(()=>{},100))}});let n=e=>{if(e.key===`F12`||e.ctrlKey&&e.shiftKey&&(e.key===`I`||e.key===`J`||e.key===`C`)||e.ctrlKey&&e.key===`U`)return e.preventDefault(),!1},r=e=>(e.preventDefault(),!1),i=e=>(e.preventDefault(),!1);document.addEventListener(`keydown`,n),document.addEventListener(`contextmenu`,r),document.addEventListener(`selectstart`,i);let a=setInterval(()=>{(window.outerHeight-window.innerHeight>200||window.outerWidth-window.innerWidth>200)&&(document.documentElement.innerHTML=``,document.documentElement.style.display=`none`)},500);return()=>{document.removeEventListener(`keydown`,n),document.removeEventListener(`contextmenu`,r),document.removeEventListener(`selectstart`,i),clearInterval(a)}},$=null;return s(()=>{qe(),Ve(),document.addEventListener(`fullscreenchange`,Ke),$=Je()}),re(()=>{X(),document.removeEventListener(`fullscreenchange`,Ke),$&&$()}),(i,s)=>(a(),l(`div`,oe,[c(`div`,se,[n(c(`div`,ce,[c(`button`,{id:`fullscreen-btn`,onClick:Ge,class:`absolute top-6 right-6 text-gray-400 hover:text-white transition z-30`,title:`Toggle Fullscreen`},[n((a(),l(`svg`,le,[...s[3]||=[c(`path`,{d:`M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3`},null,-1)]],512)),[[d,!h.value]]),n((a(),l(`svg`,ue,[...s[4]||=[c(`path`,{d:`M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3`},null,-1)]],512)),[[d,h.value]])]),s[9]||=c(`h1`,{class:`text-3xl md:text-4xl font-bold text-emerald-400`},`Typing Master`,-1),c(`div`,de,[c(`div`,fe,[s[5]||=o(`SCORE: `,-1),c(`span`,pe,r(y.value),1)]),c(`div`,me,[s[6]||=o(`분당타수: `,-1),c(`span`,he,r(Math.round(x.value)),1),s[7]||=o(` 타`,-1)]),c(`div`,ge,[s[8]||=o(`LIVES: `,-1),c(`span`,_e,r(b.value),1)])]),c(`div`,{id:`game-screen`,ref_key:`gameScreen`,ref:E,class:e([`w-full h-[50vh] md:h-[60vh] bg-gray-900/80 border-2 border-slate-700 rounded-lg shadow-inner relative overflow-hidden`,{"flash-red":g.value}])},[(a(!0),l(ne,null,t(k.value,e=>(a(),te(ae,{key:e.id,text:e.text,type:e.type,x:e.x,y:e.y,"z-index":e.zIndex},null,8,[`text`,`type`,`x`,`y`,`z-index`]))),128))],2),n(c(`input`,{type:`text`,id:`input-box`,ref_key:`inputBox`,ref:D,"onUpdate:modelValue":s[0]||=e=>C.value=e,onKeydown:Be,onInput:Re,class:e([`w-full p-4 bg-slate-900 border-2 rounded-lg text-xl text-center focus:outline-none focus:ring-2 transition`,{"border-emerald-500 focus:ring-emerald-400":v.value===`neutral`,"border-green-500 focus:ring-green-400 bg-green-900/20":v.value===`match`,"border-red-500 focus:ring-red-400 bg-red-900/20":v.value===`no-match`||_.value}]),placeholder:`Type here and press Enter...`,disabled:S.value},null,42,ve),[[u,C.value]])],512),[[d,p.value]]),n(c(`div`,ye,[c(`div`,be,[s[12]||=c(`h2`,{class:`text-4xl font-extrabold text-white mb-6`},`Game Settings`,-1),c(`div`,xe,[c(`div`,null,[s[10]||=c(`label`,{for:`custom-words`,class:`block mb-2 font-bold text-emerald-400`},`키워드 (한 줄에 하나씩)`,-1),n(c(`textarea`,{id:`custom-words`,"onUpdate:modelValue":s[1]||=e=>w.value=e,rows:`8`,class:`w-full focus:outline-none focus:ring-2 focus:ring-emerald-400`},null,512),[[u,w.value]])]),c(`div`,null,[s[11]||=c(`label`,{for:`custom-syntax`,class:`block mb-2 font-bold text-purple-400`},`구문 (한 줄에 하나씩)`,-1),n(c(`textarea`,{id:`custom-syntax`,"onUpdate:modelValue":s[2]||=e=>T.value=e,rows:`8`,class:`w-full focus:outline-none focus:ring-2 focus:ring-purple-400`},null,512),[[u,T.value]])])]),c(`div`,Se,[c(`button`,{onClick:Ue,class:`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition transform hover:scale-105`},` Import JSON `),c(`input`,{ref_key:`importFileInput`,ref:O,type:`file`,id:`import-file`,class:`hidden`,accept:`.json`,onChange:We},null,544),c(`button`,{onClick:He,class:`bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg transition transform hover:scale-105`},` Export JSON `)]),c(`button`,{onClick:Fe,class:`w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-2xl py-4 px-10 rounded-lg transition transform hover:scale-105`},` Start Game `)])],512),[[d,f.value]]),n(c(`div`,Ce,[c(`div`,we,[s[13]||=c(`h2`,{class:`text-5xl font-extrabold text-white mb-4`},`Game Over`,-1),c(`p`,Te,`Final Score: `+r(y.value),1),c(`p`,Ee,`분당타수: `+r(Math.round(x.value))+` 타`,1),c(`button`,{onClick:Le,class:`bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-2xl py-4 px-10 rounded-lg transition transform hover:scale-105`},` Back to Settings `)])],512),[[d,m.value]])])]))}},[[`__scopeId`,`data-v-f61fa268`]]);export{m as default};