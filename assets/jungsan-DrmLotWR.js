import{A as e,C as t,D as n,E as r,N as i,O as a,T as o,b as s,d as c,f as l,g as u,h as d,i as ee,k as f,p,s as m,u as h,v as g,w as _,x as te,y as v}from"./index-CDTxaWn-.js";import{t as ne}from"./_plugin-vue_export-helper-9n1O4nl6.js";import{i as re,n as ie,o as ae,s as oe,t as se}from"./useConfirmDialog-jcSZ-ERb.js";var ce={class:`jungsan-container`},le={class:`d-flex`},ue={style:{display:`flex`,"justify-content":`space-between`,"align-items":`center`}},de={style:{display:`flex`,"align-items":`center`,"justify-content":`end`,gap:`0.2rem`,"flex-wrap":`wrap`}},fe={class:`input-group`},pe={class:`input-group`},me={id:`tablesContainer`},he={class:`input-group`},ge=[`onUpdate:modelValue`],y={class:`input-group`},b=[`onUpdate:modelValue`],x={class:`input-group`},S=[`onUpdate:modelValue`],C={class:`input-group`},w=[`onUpdate:modelValue`],T={class:`checkbox-group`},E=[`onUpdate:modelValue`],D={class:`support-per-person`},O={key:0,class:`remaining-support`,style:{"font-size":`1.2rem`}},k={key:0},A={key:1,class:`remaining-support`},j=[`href`,`download`],M={class:`dialog-title`},N={class:`dialog-message`},P={class:`dialog-actions`},F=`jungsanFormData`,I=ne({__name:`index`,setup(ne){let I=f(1),L=f(0),R=f([]),z=f(null),B=f(null),{showDialog:_e,dialogTitle:ve,dialogMessage:ye,dialogRef:be,confirmButtonRef:xe,isAlert:Se,showConfirm:V,showAlert:H,handleConfirm:U,handleCancel:W,handleDialogClick:G}=se(),Ce=e=>({memberCount:e.memberCount||0,guestCount:e.guestCount||0,foodPrice:e.foodPrice||0,memo:e.memo||``,hasAlcohol:e.hasAlcohol||!1}),we=()=>R.value.length===0?null:{tableCount:I.value,totalSupport:L.value,tableData:R.value.map(e=>Ce(e))},K=e=>{I.value=e.tableCount||1,L.value=e.totalSupport||0,$(),e.tableData&&e.tableData.forEach((e,t)=>{R.value[t]&&(R.value[t].memberCount=e.memberCount||0,R.value[t].guestCount=e.guestCount||0,R.value[t].foodPrice=e.foodPrice||0,R.value[t].memo=e.memo||``,R.value[t].hasAlcohol=e.hasAlcohol||!1)})},{saveToLocalStorage:Te,loadFromLocalStorage:Ee,tryRestoreFromQuery:De,shareLink:q,clearStorage:Oe,isRestoring:ke}=oe(F,we,K,V,H),{downloadLink:Ae,downloadUrl:je,downloadFilename:Me,fileInput:J,exportJson:Y,importJson:X,handleFileImport:Z}=ie(F,K,ae,H),Ne=async()=>{z.value=null;let e=re(R.value,L.value);if(e.error){await H(e.error,`ì˜¤ë¥˜`);return}z.value=e,await s(),B.value&&B.value.scrollIntoView({behavior:`smooth`,block:`start`})},Q=l(()=>{if(!z.value)return null;let e=e=>e==null||isNaN(e)?`0`:Math.round(e).toLocaleString();return!z.value.results||!Array.isArray(z.value.results)||z.value.results.length===0?null:{...z.value,formattedSupportPerMember:e(z.value.supportPerMember),formattedRemainingSupportSum:z.value.remainingSupportSum?e(z.value.remainingSupportSum):null,formattedResults:z.value.results.map(t=>({...t,formattedMemberPayment:e(t.memberPayment),formattedGuestPayment:e(t.guestPayment),formattedRemainingSupport:t.remainingSupport?e(t.remainingSupport):null}))}}),$=()=>{let e=I.value;R.value=Array.from({length:e},()=>({memberCount:0,guestCount:0,foodPrice:0,memo:``,hasAlcohol:!1}))},Pe=()=>{$()},Fe=async()=>{await V(`ì´ˆê¸°í™” í™•ì¸`,`ì •ë§ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ˆê¸°í™”ì‹œ ì„ì‹œì €ì¥ëœ ë°ì´í„°ëŠ” ì‚­ì œë˜ê³  ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)&&(Oe(),I.value=1,L.value=0,$(),z.value=null)};return r([I,L,R],()=>{ke.value||Te()},{deep:!0}),te(async()=>{await De()||(localStorage.getItem(F)?await Ee():$())}),(r,s)=>{let l=o(`router-link`);return t(),u(`div`,ce,[p(`div`,le,[v(l,{to:`/jungsan/alchol`,class:`md-btn`},{default:n(()=>[...s[10]||=[g(`ì¼ë°˜ì¸ / ìˆ ê³ ë˜ êµ¬ë¶„ ì •ì‚°ê¸°`,-1)]]),_:1})]),p(`div`,ue,[s[16]||=p(`h1`,null,`ì–¸ë„¤ì„ë“œ íšŒì‹ ì •ì‚° ê³„ì‚°ê¸°`,-1),p(`div`,de,[v(l,{to:`/`,class:`home-button`},{default:n(()=>[...s[11]||=[p(`span`,{class:`material-icons`},`home`,-1),g(`ì•± ëª©ë¡ `,-1)]]),_:1}),p(`button`,{onClick:Fe,style:{"margin-left":`1rem`}},[...s[12]||=[p(`span`,{class:`material-icons`},`restart_alt`,-1),g(`ì´ˆê¸°í™” `,-1)]]),p(`button`,{onClick:s[0]||=(...t)=>e(Y)&&e(Y)(...t),style:{"margin-left":`0.5rem`}},[...s[13]||=[p(`span`,{class:`material-icons`},`file_upload`,-1),g(`JSON ë‚´ë³´ë‚´ê¸° `,-1)]]),p(`button`,{onClick:s[1]||=(...t)=>e(X)&&e(X)(...t),style:{"margin-left":`0.5rem`}},[...s[14]||=[p(`span`,{class:`material-icons`},`file_download`,-1),g(`JSON ê°€ì ¸ì˜¤ê¸° `,-1)]]),p(`button`,{onClick:s[2]||=(...t)=>e(q)&&e(q)(...t),style:{"margin-left":`0.5rem`}},[...s[15]||=[p(`span`,{class:`material-icons`},`link`,-1),g(`ë§í¬ë¡œ ê³µìœ  `,-1)]])])]),p(`div`,fe,[s[18]||=p(`label`,{for:`tableCount`},`í…Œì´ë¸” ê°œìˆ˜`,-1),a(p(`input`,{type:`number`,id:`tableCount`,"onUpdate:modelValue":s[3]||=e=>I.value=e,min:`1`,onInput:Pe},null,544),[[m,I.value,void 0,{number:!0}]]),p(`button`,{onClick:$},[...s[17]||=[p(`span`,{class:`material-icons`},`add_circle`,-1),g(` í…Œì´ë¸” ìƒì„± `,-1)]])]),p(`div`,pe,[s[19]||=p(`label`,{for:`totalSupport`},`ì´ íšŒì‹ ì§€ì›ë¹„`,-1),a(p(`input`,{type:`number`,id:`totalSupport`,"onUpdate:modelValue":s[4]||=e=>L.value=e,min:`0`},null,512),[[m,L.value,void 0,{number:!0}]])]),p(`div`,me,[(t(!0),u(c,null,_(R.value,(e,n)=>(t(),u(`div`,{key:n,class:`table-container`},[p(`h3`,null,`í…Œì´ë¸” `+i(n+1),1),p(`div`,he,[s[20]||=p(`label`,null,`ë¶€ì› ìˆ˜`,-1),a(p(`input`,{type:`number`,"onUpdate:modelValue":t=>e.memberCount=t,min:`0`},null,8,ge),[[m,e.memberCount,void 0,{number:!0}]])]),p(`div`,y,[s[21]||=p(`label`,null,`ë‚œì… ìˆ˜`,-1),a(p(`input`,{type:`number`,"onUpdate:modelValue":t=>e.guestCount=t,min:`0`},null,8,b),[[m,e.guestCount,void 0,{number:!0}]])]),p(`div`,x,[s[22]||=p(`label`,null,`ë©”ëª¨`,-1),a(p(`textarea`,{"onUpdate:modelValue":t=>e.memo=t,rows:`2`,placeholder:`ë¶€ì›, ë‚œì… ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”`},null,8,S),[[m,e.memo]])]),p(`div`,C,[s[23]||=p(`label`,null,`ìŒì‹ ê°€ê²©`,-1),a(p(`input`,{type:`number`,"onUpdate:modelValue":t=>e.foodPrice=t,min:`0`},null,8,w),[[m,e.foodPrice,void 0,{number:!0}]])]),p(`div`,T,[p(`label`,null,[a(p(`input`,{type:`checkbox`,"onUpdate:modelValue":t=>e.hasAlcohol=t},null,8,E),[[ee,e.hasAlcohol]]),s[24]||=g(` ìˆ  ì„­ì·¨ `,-1)])])]))),128))]),p(`button`,{onClick:Ne,id:`calc-button`},[...s[25]||=[p(`span`,{class:`material-icons`},`calculate`,-1),g(` ì •ì‚° ê³„ì‚°í•˜ê¸° `,-1)]]),Q.value&&Q.value.formattedResults&&Q.value.formattedResults.length>0?(t(),u(`div`,{key:0,id:`result`,ref_key:`resultRef`,ref:B,class:`result`},[s[30]||=p(`h2`,null,`ì •ì‚° ê²°ê³¼`,-1),p(`div`,D,`ì¸ë‹¹ ì§€ì›ê¸ˆ: `+i(Q.value.formattedSupportPerMember)+`ì›`,1),Q.value.formattedRemainingSupportSum?(t(),u(`div`,O,[s[26]||=p(`strong`,null,`ì´ ë‚¨ì€ ì§€ì›ê¸ˆ: `,-1),g(` `+i(Q.value.formattedRemainingSupportSum)+`ì› `,1)])):d(``,!0),(t(!0),u(c,null,_(Q.value.formattedResults,(e,n)=>(t(),u(`div`,{key:n,class:`table-container`},[p(`h3`,null,`í…Œì´ë¸” `+i(e.tableNumber)+` `+i(e.hasAlcohol?`ğŸº`:``),1),p(`p`,null,[s[27]||=p(`strong`,null,`ë©”ëª¨:`,-1),g(` `+i(e.memo||`ì—†ìŒ`),1)]),p(`p`,null,[p(`strong`,null,`ë¶€ì›(`+i(e.memberCount)+`ëª…) ì •ì‚°ê¸ˆì•¡:`,1),g(` `+i(e.formattedMemberPayment)+`ì›`,1)]),p(`p`,null,[p(`strong`,null,`ë‚œì…(`+i(e.guestCount)+`ëª…) ì •ì‚°ê¸ˆì•¡:`,1),g(` `+i(e.formattedGuestPayment)+`ì›`,1)]),e.hasAlcohol?(t(),u(`p`,k,[...s[28]||=[p(`strong`,null,`ìˆ  ì„­ì·¨:`,-1),g(` ì˜ˆ`,-1)]])):d(``,!0),e.formattedRemainingSupport?(t(),u(`p`,A,[s[29]||=p(`strong`,null,`ë‚¨ì€ ì§€ì›ê¸ˆ:`,-1),g(` `+i(e.formattedRemainingSupport)+`ì› `,1)])):d(``,!0)]))),128))],512)):d(``,!0),p(`a`,{ref_key:`downloadLink`,ref:Ae,href:e(je),download:e(Me),style:{display:`none`}},null,8,j),p(`input`,{ref_key:`fileInput`,ref:J,type:`file`,accept:`application/json`,style:{display:`none`},onChange:s[5]||=(...t)=>e(Z)&&e(Z)(...t)},null,544),p(`dialog`,{ref_key:`dialogRef`,ref:be,class:`confirm-dialog`,onClick:s[9]||=(...t)=>e(G)&&e(G)(...t)},[p(`div`,{class:`dialog-content`,onClick:s[8]||=h(()=>{},[`stop`])},[p(`h3`,M,i(e(ve)),1),p(`p`,N,i(e(ye)),1),p(`div`,P,[e(Se)?d(``,!0):(t(),u(`button`,{key:0,onClick:s[6]||=(...t)=>e(W)&&e(W)(...t),class:`dialog-btn dialog-btn-cancel`},`ì·¨ì†Œ`)),p(`button`,{ref_key:`confirmButtonRef`,ref:xe,onClick:s[7]||=(...t)=>e(U)&&e(U)(...t),class:`dialog-btn dialog-btn-confirm`,autofocus:``},`í™•ì¸`,512)])])],512)])}}},[[`__scopeId`,`data-v-95639ce4`]]);export{I as default};