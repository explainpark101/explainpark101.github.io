import{C as e,N as t,O as n,T as r,_ as i,b as a,d as o,f as s,g as c,h as l,j as u,k as d,l as f,m as ee,p,s as m,u as h,v as g,w as _,x as te}from"./index-C3t6IDKG.js";import{t as v}from"./_plugin-vue_export-helper-9n1O4nl6.js";var y={class:`todo-item-content`},b=[`checked`],x=[`value`],S={__name:`TodoItem`,props:{todo:{type:Object,required:!0},collapsedSubtasks:{type:Set,required:!0}},emits:[`toggle-state`,`add-subtask`,`delete-todo`,`edit-text`,`toggle-collapse`,`drag-start`,`drag-end`,`drag-over`,`drag-leave`,`drop`],setup(n,{emit:i}){let a=n,s=i,f=d(!1),m=e=>{let t=e.target.checked?`completed`:`not-started`;s(`toggle-state`,a.todo.id,t)},g=e=>{s(`toggle-state`,a.todo.id,e.target.value)},te=e=>{f.value=!0,s(`drag-start`,e,a.todo.id)},v=e=>{f.value=!1,s(`drag-end`,e)},S=e=>{s(`drag-over`,e,a.todo.id)},ne=e=>{s(`drag-leave`,e)},re=e=>{s(`drop`,e,a.todo.id)};return(i,a)=>{let s=r(`TodoItem`,!0);return e(),c(`li`,{class:u([n.todo.state,{dragging:f.value}]),draggable:!0,onDragstart:te,onDragend:v,onDragover:h(S,[`prevent`]),onDragleave:ne,onDrop:h(re,[`prevent`])},[p(`div`,y,[p(`div`,null,[n.todo.subtasks&&n.todo.subtasks.length>0?(e(),c(`button`,{key:0,class:u([`collapse-subtask-btn`,{collapsed:n.collapsedSubtasks.has(n.todo.id)}]),onClick:a[0]||=h(e=>i.$emit(`toggle-collapse`,n.todo.id),[`stop`]),title:`하위 할일 접기/펼치기`},` ▼ `,2)):l(``,!0),p(`label`,null,[p(`input`,{type:`checkbox`,checked:n.todo.state===`completed`,onChange:m},null,40,b),p(`span`,{class:`todo-text`,onDblclick:a[1]||=e=>i.$emit(`edit-text`,n.todo.id)},t(n.todo.text),33)])]),p(`div`,null,[p(`select`,{class:`todo-state`,value:n.todo.state,onChange:g},[...a[14]||=[p(`option`,{value:`not-started`},`시작하지 않음`,-1),p(`option`,{value:`in-progress`},`진행중`,-1),p(`option`,{value:`completed`},`완료`,-1)]],40,x),p(`button`,{class:`add-subtask-btn`,onClick:a[2]||=h(e=>i.$emit(`add-subtask`,n.todo.id),[`stop`]),title:`하위 할일 추가`},`+`),p(`button`,{class:`delete-todo-btn`,onClick:a[3]||=h(e=>i.$emit(`delete-todo`,n.todo.id),[`stop`]),title:`할일 삭제`},`×`)])]),n.todo.subtasks&&n.todo.subtasks.length>0?(e(),c(`ul`,{key:0,class:u([`subtask-list`,{collapsed:n.collapsedSubtasks.has(n.todo.id)}])},[(e(!0),c(o,null,_(n.todo.subtasks,t=>(e(),ee(s,{key:t.id,todo:t,"collapsed-subtasks":n.collapsedSubtasks,onToggleState:a[4]||=(e,t)=>i.$emit(`toggle-state`,e,t),onAddSubtask:a[5]||=e=>i.$emit(`add-subtask`,e),onDeleteTodo:a[6]||=e=>i.$emit(`delete-todo`,e),onEditText:a[7]||=e=>i.$emit(`edit-text`,e),onToggleCollapse:a[8]||=e=>i.$emit(`toggle-collapse`,e),onDragStart:a[9]||=(e,t)=>i.$emit(`drag-start`,e,t),onDragEnd:a[10]||=e=>i.$emit(`drag-end`,e),onDragOver:a[11]||=(e,t)=>i.$emit(`drag-over`,e,t),onDragLeave:a[12]||=e=>i.$emit(`drag-leave`,e),onDrop:a[13]||=(e,t)=>i.$emit(`drop`,e,t)},null,8,[`todo`,`collapsed-subtasks`]))),128))],2)):l(``,!0)],34)}}},ne=v(S,[[`__scopeId`,`data-v-9b61d5b1`]]),re={class:`todo-app`},ie={class:`container`},ae={id:`tabsContainer`,class:`tabs-container`},oe=[`onDragstart`,`onDragover`,`onDragleave`,`onDrop`,`onClick`],se=[`onDblclick`],ce=[`onClick`],le={class:`controls-container`},ue={key:0,id:`todoList`},de={key:1,class:`empty-list-message`},fe={class:`dialog-actions`},pe=`ABCI_TodoList_Tabs`,me=2,C=`todos`,w=`tabs`,he=`  `,T=v({__name:`index`,setup(r){let v=d(null),y=d([]),b=d(null),x=d([]),S=d(new Set),T=d(``),E=d(`임시 할일 리스트`),D=d(null),O=d(null),k=d(null),A=d(null),j=d(null),M=d(null),N=d(null),P=d(``),F=d(``),ge=d(``),_e=d(``),I=d(`alert`),L=d(``),R=d(null),ve=d(!1),ye=d(!1),be=d(`확인`),xe=d(`취소`),z=d(null),B=d(null),Se=s(()=>[...x.value].sort((e,t)=>(e.order||0)-(t.order||0))),Ce=s(()=>{if(!T.value)return y.value;let e=T.value.toLowerCase(),t=y.value.filter(t=>t.text.toLowerCase().includes(e)),n=new Set;return t.forEach(e=>{let t=e;for(;t;)n.add(t.id),t=y.value.find(e=>e.id===t.parentId)}),y.value.filter(e=>n.has(e.id))}),we=s(()=>Te(Ce.value));function Te(e){let t=new Map(e.map(e=>[e.id,{...e,subtasks:[]}])),n=[];for(let e of t.values())e.parentId&&t.has(e.parentId)?t.get(e.parentId).subtasks.push(e):n.push(e);let r=e=>e.sort((e,t)=>(e.order||0)-(t.order||0));for(let e of t.values())e.subtasks.length>0&&r(e.subtasks);return r(n),n}let Ee=()=>new Promise((e,t)=>{let n=indexedDB.open(pe,me);n.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(C)||t.createObjectStore(C,{keyPath:`id`}).createIndex(`tabId`,`tabId`,{unique:!1}),t.objectStoreNames.contains(w)||t.createObjectStore(w,{keyPath:`id`})},n.onsuccess=t=>{v.value=t.target.result,e(v.value)},n.onerror=e=>t(e.target.errorCode)}),V=e=>new Promise(t=>{v.value.transaction(e).objectStore(e).getAll().onsuccess=e=>t(e.target.result)}),De=e=>new Promise(t=>{v.value.transaction(C).objectStore(C).index(`tabId`).getAll(e).onsuccess=e=>t(e.target.result)}),H=(e,t)=>new Promise(n=>{v.value.transaction(e,`readwrite`).objectStore(e).put(t).onsuccess=n}),U=e=>new Promise(t=>{ge.value=e.title,_e.value=e.message,I.value=e.type||`alert`,L.value=e.defaultValue||``,R.value=t,be.value=e.okText||`확인`,xe.value=e.cancelText||`취소`,ve.value=!0,ye.value=e.type===`confirm`||e.type===`prompt`,k.value&&(k.value.showModal(),a(()=>{e.type===`prompt`&&M.value?M.value.focus():N.value&&N.value.focus()}))}),Oe=()=>{k.value&&k.value.close();let e=I.value===`prompt`?L.value:!0;R.value&&=(R.value(e),null)},ke=()=>{k.value&&k.value.close();let e=I.value===`prompt`?null:!1;R.value&&=(R.value(e),null)},W=(e,t=`알림`)=>U({title:t,message:e,type:`alert`}),G=(e,t=`확인`)=>U({title:t,message:e,type:`confirm`}),K=(e,t,n=`입력`)=>U({title:n,message:e,defaultValue:t,type:`prompt`}),q=async()=>{let e=await V(w),t=[];if(e.forEach((e,n)=>{e.order===void 0&&(e.order=n,t.push(e))}),t.length>0){let e=v.value.transaction(w,`readwrite`);t.forEach(t=>e.objectStore(w).put(t)),await new Promise(t=>e.oncomplete=t)}x.value=e},Ae=async()=>{let e=await K(`새 탭의 이름을 입력하세요:`,`새 목록`);if(e&&e.trim()){let t=await V(w),n=e.trim();if(t.find(e=>e.name===n)){await W(`'${n}' 이름의 탭이 이미 존재합니다. 다른 이름을 사용해주세요.`,`중복된 탭 이름`);return}let r=t.length,i={id:`tab-${Date.now()}`,name:n,order:r};await H(w,i),await J(i.id)}},je=async e=>{let t=await K(`탭의 새 이름을 입력하세요:`,e.name);if(t&&t.trim()&&t.trim()!==e.name){let n=t.trim();if((await V(w)).find(t=>t.name===n&&t.id!==e.id)){await W(`'${n}' 이름의 탭이 이미 존재합니다. 다른 이름을 사용해주세요.`,`중복된 탭 이름`);return}let r={id:e.id,name:n,order:e.order??0};await H(w,r),x.value=await V(w)}},Me=async e=>{if(!await G(`이 탭과 모든 할 일을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`))return;let t=v.value.transaction([C,w],`readwrite`),n=t.objectStore(C),r=t.objectStore(w),i=n.index(`tabId`).openCursor(e);i.onsuccess=e=>{let t=e.target.result;t&&(t.delete(),t.continue())},r.delete(e),t.oncomplete=async()=>{if(b.value===e){let e=await V(w),t=e.length>0?e[0].id:null;await J(t)}else await q()}},J=async e=>{b.value=e,localStorage.setItem(`currentTabId`,e),await q(),await Y()},Ne=(e,t)=>{z.value=t,e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t),e.target.classList.add(`dragging`)},Pe=e=>{e.target.classList.remove(`dragging`),document.querySelectorAll(`.drag-over`).forEach(e=>e.classList.remove(`drag-over`)),z.value=null},Fe=(e,t)=>{t!==z.value&&(document.querySelectorAll(`.drag-over`).forEach(e=>e.classList.remove(`drag-over`)),e.target.closest(`.tab-item`)?.classList.add(`drag-over`))},Ie=(e,t)=>{e.target.closest(`.tab-item`)?.classList.remove(`drag-over`)},Le=async(e,t)=>{e.preventDefault(),document.querySelectorAll(`.drag-over`).forEach(e=>e.classList.remove(`drag-over`));let n=z.value;!t||n===t||await Re(n,t)},Re=async(e,t)=>{let n=(await V(w)).sort((e,t)=>(e.order||0)-(t.order||0)),r=n.findIndex(t=>t.id===e),i=n.findIndex(e=>e.id===t);if(r===-1||i===-1)return;let[a]=n.splice(r,1);n.splice(i,0,a);let o=[];n.forEach((e,t)=>{e.order!==t&&(e.order=t,o.push(H(w,e)))}),o.length>0&&(await Promise.all(o),await q())},Y=async()=>{if(!b.value){y.value=[];return}let e=await De(b.value),t=[],n=new Map;if(e.forEach(e=>{let t=e.parentId||null;n.has(t)||n.set(t,[]),n.get(t).push(e)}),n.forEach(e=>{e.forEach((e,n)=>{e.order===void 0&&(e.order=n,t.push(e))})}),t.length>0){let n=v.value.transaction(C,`readwrite`);t.forEach(e=>n.objectStore(C).put(e)),await new Promise(e=>n.oncomplete=e),e=await De(b.value)}y.value=e},ze=async e=>{let t=await K(`새 하위 할일의 내용을 입력하세요:`,``);if(t&&t.trim()){let n=y.value.filter(t=>t.parentId===e),r={id:`todo-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,text:t.trim(),state:`not-started`,parentId:e,tabId:b.value,order:n.length};await H(C,r);let i=y.value.find(t=>t.id===e);i&&i.state===`completed`&&(i.state=`in-progress`,await H(C,i),await X(i.parentId)),await Y()}},Be=async e=>{if(!await G(`이 할 일과 모든 하위 할 일을 삭제하시겠습니까?`))return;let t=new Set([e]),n=e=>{y.value.filter(t=>t.parentId===e).forEach(e=>{t.add(e.id),n(e.id)})};n(e);let r=v.value.transaction(C,`readwrite`),i=r.objectStore(C);t.forEach(e=>i.delete(e)),r.oncomplete=async()=>{await Y()}},Ve=async e=>{let t=y.value.find(t=>t.id===e);if(!t)return;let n=await K(`할일 내용을 수정하세요:`,t.text,`할일 수정`);n&&n.trim()&&n.trim()!==t.text&&(t.text=n.trim(),await H(C,t),await Y())},He=e=>{S.value.has(e)?S.value.delete(e):S.value.add(e)},Ue=async(e,t)=>{let n=y.value.find(t=>t.id===e);n&&n.state!==t&&(n.state=t,await H(C,n),await X(n.parentId),t===`completed`&&await We(e,`completed`),await Y())},X=async e=>{if(!e)return;let t=y.value.find(t=>t.id===e),n=y.value.filter(t=>t.parentId===e);if(t&&n.length>0){let e=n.every(e=>e.state===`completed`),r=n.some(e=>e.state===`in-progress`),i=e?`completed`:r||n.some(e=>e.state===`completed`)?`in-progress`:`not-started`;t.state!==i&&(t.state=i,await H(C,t),await X(t.parentId))}},We=async(e,t)=>{let n=y.value.filter(t=>t.parentId===e);for(let e of n)e.state!==t&&(e.state=t,await H(C,e),await We(e.id,t))},Ge=async()=>{if(!b.value||y.value.length===0){await W(`초기화할 할일이 없습니다.`);return}if(!await G(`현재 탭의 모든 할일을 "시작하지 않음" 상태로 변경하시겠습니까?`))return;let e=[];y.value.forEach(t=>{t.state!==`not-started`&&(t.state=`not-started`,e.push(H(C,t)))}),e.length>0?(await Promise.all(e),await Y(),await W(`${e.length}개의 할일이 초기화되었습니다.`)):await W(`이미 모든 할일이 "시작하지 않음" 상태입니다.`)},Ke=async()=>{if(!b.value||y.value.length===0){await W(`삭제할 완료된 할일이 없습니다.`);return}let e=y.value.filter(e=>e.state===`completed`);if(e.length===0){await W(`완료된 할일이 없습니다.`);return}if(!await G(`완료된 ${e.length}개의 할일을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`))return;let t=v.value.transaction(C,`readwrite`),n=t.objectStore(C);e.forEach(e=>n.delete(e.id)),t.oncomplete=async()=>{await Y(),await W(`${e.length}개의 완료된 할일이 삭제되었습니다.`)}},qe=e=>e===`completed`?`[x]`:e===`in-progress`?`[o]`:`[ ]`,Je=e=>{if(!e||e.length===0)return``;let t=Te(e),n=``,r=(e,t=0)=>{let i=`  `.repeat(t),a=qe(e.state);n+=i+`- `+a+` `+e.text+`
`,e.subtasks&&e.subtasks.length>0&&e.subtasks.forEach(e=>{r(e,t+1)})};return t.forEach(e=>r(e)),n.trim()},Ye=async()=>{if(!b.value){await W(`먼저 탭을 선택해주세요.`);return}if(y.value.length===0){await W(`내보낼 할일이 없습니다.`);return}F.value=Je(y.value),O.value&&O.value.showModal()},Xe=async()=>{try{await navigator.clipboard.writeText(F.value),await W(`할일 목록이 클립보드에 복사되었습니다.`)}catch(e){console.error(`클립보드 복사 실패:`,e),j.value&&(j.value.select(),document.execCommand(`copy`)),await W(`할일 목록이 클립보드에 복사되었습니다.`)}},Ze=async()=>{if(!b.value){await W(`먼저 탭을 선택해주세요.`);return}let e=$e(F.value,b.value);if(e.length===0){await W(`적용할 항목이 없습니다. 마크다운 형식(- [ ] / - [o] / - [x] + 내용)을 확인해주세요.`);return}let t=v.value.transaction(C,`readwrite`),n=t.objectStore(C);y.value.map(e=>e.id).forEach(e=>n.delete(e)),e.forEach(e=>n.put(e)),await new Promise(e=>t.oncomplete=e),await Y(),Q(),await W(`편집 내용 ${e.length}개 항목으로 적용되었습니다.`)},Qe=e=>{let t=e.match(/^\s*-\s*\[\s*([ xo])\]\s*(.*)$/i);if(t){let n=t[1].toLowerCase(),r=n===`x`?`completed`:n===`o`?`in-progress`:`not-started`,i=t[2].trim();return{indent:e.match(/^\s*/)[0].length,state:r,text:i}}let n=e.match(/^\s*((?:[-*+]|\d+\.)\s+)(.*)$/);if(n){let t=e.match(/^\s*/)[0].length,r=n[2].trim();return{indent:t,state:`not-started`,text:r}}return null},$e=(e,t)=>{let n=e.split(`
`),r=[],i=[],a=new Map;return n.forEach(e=>{let n=Qe(e);if(!n||!n.text)return;let{indent:o,state:s,text:c}=n,l=`todo-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;for(;i.length>0&&i[i.length-1].indent>=o;)i.pop();let u=i.length>0?i[i.length-1].id:null,d=a.get(u)||0;r.push({id:l,text:c,state:s,parentId:u,tabId:t,order:d}),a.set(u,d+1),i.push({id:l,indent:o})}),r},Z=async()=>{if(!b.value){await W(`먼저 탭을 선택하거나 생성해주세요.`);return}let e=P.value,t=$e(e,b.value);if(t.length>0){let e=v.value.transaction(C,`readwrite`);t.forEach(t=>e.objectStore(C).put(t)),await new Promise(t=>e.oncomplete=t),P.value=``,tt(),await Y()}},et=()=>{D.value&&(D.value.showModal(),a(()=>{A.value&&A.value.focus()}))},tt=()=>{D.value&&D.value.close()},Q=()=>{O.value&&O.value.close()},nt=(e,t)=>t<=0?0:(e.slice(0,t).match(/\n/g)||[]).length,$=(e,t)=>{let n=e.split(`
`);if(t<=0)return 0;let r=0;for(let e=0;e<t&&e<n.length;e++)r+=n[e].length+1;return r},rt=e=>{let t=j.value;if(!t)return;if(e.key===`Escape`){e.preventDefault(),Q();return}if((e.ctrlKey||e.metaKey)&&e.key===`Enter`){e.preventDefault(),Ze();return}let n=F.value,r=n.split(`
`),i=t.selectionStart,o=t.selectionEnd,s=nt(n,i),c=nt(n,o>0?o-1:0),l=c-s+1;if(e.key===`Tab`){if(e.preventDefault(),r.length===0)return;let t=$(n,s),i=$(n,c+1),o=r.slice(s,c+1),l=(e.shiftKey?o.map(e=>e.startsWith(he)?e.substring(2):e):o.map(e=>he+e)).join(`
`),u=n.substring(0,t)+l+n.substring(i);F.value=u,a(()=>{j.value&&(j.value.selectionStart=$(u,s),j.value.selectionEnd=$(u,c+1),j.value.focus())});return}if(e.ctrlKey&&e.shiftKey&&e.key===`K`||e.ctrlKey&&e.key===`D`){if(e.preventDefault(),r.length===0)return;r.splice(s,l);let t=r.join(`
`);F.value=t,a(()=>{if(!j.value)return;let e=Math.min(s,r.length-1),n=e>=0?$(t,e):0;j.value.selectionStart=n,j.value.selectionEnd=n,j.value.focus()});return}if(!e.altKey||e.key!==`ArrowUp`&&e.key!==`ArrowDown`||(e.preventDefault(),r.length===0))return;if(e.key===`ArrowUp`){if(s===0)return;let e=r.splice(s,l);r.splice(s-1,0,...e)}else{if(c>=r.length-1)return;let e=r.splice(s,l);r.splice(s+1,0,...e)}let u=r.join(`
`);F.value=u,a(()=>{if(!j.value)return;let t=e.key===`ArrowUp`?s-1:s+1,n=t+l-1;j.value.selectionStart=$(u,t),j.value.selectionEnd=$(u,n+1),j.value.focus()})},it=e=>{if(e.key===`Tab`){e.preventDefault();let t=e.target,n=t.selectionStart,r=t.selectionEnd,i=t.value,a=n;for(;a>0&&i[a-1]!==`
`;)a--;let o=r;for(r>n&&i[r-1]===`
`&&(o=r-1);o<i.length&&i[o]!==`
`;)o++;let s=i.substring(a,o),c=s.split(`
`),l;if(e.shiftKey){l=c.map(e=>e.startsWith(`  `)?e.substring(2):e).join(`
`),t.value=i.substring(0,a)+l+i.substring(o);let e=c[0].startsWith(`  `)?2:0;t.selectionStart=Math.max(a,n-e),t.selectionEnd=r+(l.length-s.length)}else{let e=c.map(e=>`  `+e);l=e.join(`
`),t.value=i.substring(0,a)+l+i.substring(o),t.selectionStart=n+2,t.selectionEnd=r+e.length*2}}(e.ctrlKey||e.metaKey)&&e.key===`Enter`&&(e.preventDefault(),Z())},at=(e,t)=>{B.value=t,e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t)},ot=e=>{e.target.closest(`li`)?.classList.remove(`dragging`),document.querySelectorAll(`.drag-over`).forEach(e=>e.classList.remove(`drag-over`)),B.value=null},st=(e,t)=>{t!==B.value&&(document.querySelectorAll(`.drag-over`).forEach(e=>e.classList.remove(`drag-over`)),e.target.closest(`li`)?.classList.add(`drag-over`))},ct=e=>{e.target.closest(`li`)?.classList.remove(`drag-over`)},lt=async(e,t)=>{e.preventDefault(),document.querySelectorAll(`.drag-over`).forEach(e=>e.classList.remove(`drag-over`));let n=B.value;!t||n===t||await ut(n,t)},ut=async(e,t)=>{let n=y.value.find(t=>t.id===e),r=y.value.find(e=>e.id===t);if(!n||!r)return;let i=n.parentId??null,a=r.parentId??null;if(i===a){let n=y.value.filter(e=>(e.parentId??null)===i).sort((e,t)=>(e.order||0)-(t.order||0)),r=n.findIndex(t=>t.id===e),a=n.findIndex(e=>e.id===t);if(r===-1||a===-1)return;let[o]=n.splice(r,1);n.splice(a,0,o);let s=[];n.forEach((e,t)=>{e.order!==t&&(e.order=t,s.push(H(C,e)))}),s.length>0&&(await Promise.all(s),await Y())}else await dt(e,t)},dt=async(e,t)=>{let n=y.value.find(t=>t.id===e),r=y.value.find(e=>e.id===t);if(!n||!r||e===t)return;let i=(e,t)=>{let n=y.value.filter(t=>t.parentId===e);for(let e of n)if(e.id===t||i(e.id,t))return!0;return!1};if(i(e,t)){await W(`하위 할일을 상위 할일로 만들 수 없습니다.`);return}let a=n.text.length>30?n.text.substring(0,30)+`...`:n.text,o=r.text.length>30?r.text.substring(0,30)+`...`:r.text,s=`"${a}"을(를) "${o}"의 하위 할일로 만들겠습니까?`;if(!await G(s,`계층 구조 변경`))return;let c=n.parentId,l=y.value.filter(e=>e.parentId===c);n.parentId=t,n.order=y.value.filter(e=>e.parentId===t).length;let u=[H(C,n)];l.forEach((e,t)=>{e.order!==t&&(e.order=t,u.push(H(C,e)))}),await Promise.all(u),await Y()},ft=async()=>{let e=E.value,t=await K(`새 제목을 입력하세요:`,e,`제목 편집`);t&&t.trim()&&t.trim()!==e&&(E.value=t.trim(),document.title=t.trim(),localStorage.setItem(`todoAppTitle`,t.trim()))},pt=async()=>{try{let e=localStorage.getItem(`todoAppTitle`);e&&(E.value=e,document.title=e),await Ee();let t=await V(w);if(t.length===0){let e={id:`tab-${Date.now()}`,name:`기본 목록`,order:0};await H(w,e),t.push(e)}let n=localStorage.getItem(`currentTabId`);(!n||!t.some(e=>e.id===n))&&(n=t[0].id),await J(n)}catch(e){console.error(`Failed to initialize app:`,e)}};return te(()=>{pt()}),(r,a)=>(e(),c(`div`,re,[p(`div`,ie,[p(`h1`,{onDblclick:ft,id:`mainTitle`},t(E.value),33),p(`div`,ae,[(e(!0),c(o,null,_(Se.value,n=>(e(),c(`div`,{key:n.id,class:u([`tab-item`,{active:n.id===b.value}]),draggable:!0,onDragstart:e=>Ne(e,n.id),onDragend:Pe,onDragover:h(e=>Fe(e,n.id),[`prevent`]),onDragleave:e=>Ie(e,n.id),onDrop:h(e=>Le(e,n.id),[`prevent`]),onClick:e=>J(n.id)},[p(`span`,{onDblclick:h(e=>je(n),[`stop`])},t(n.name),41,se),p(`button`,{class:`delete-tab-btn`,onClick:h(e=>Me(n.id),[`stop`])},`×`,8,ce)],42,oe))),128)),p(`button`,{id:`addTabBtn`,onClick:Ae},`+`)]),p(`div`,le,[p(`button`,{onClick:et},`할일 목록 불러오기`),p(`button`,{onClick:Ye},`할일 목록 수정 및 내보내기`),p(`button`,{onClick:Ge},`모두 시작전으로`),p(`button`,{onClick:Ke},`완료항목 삭제`),n(p(`input`,{type:`text`,"onUpdate:modelValue":a[0]||=e=>T.value=e,placeholder:`할일 검색...`,"aria-label":`할일 검색`},null,512),[[m,T.value]])]),Ce.value.length>0?(e(),c(`ul`,ue,[(e(!0),c(o,null,_(we.value,t=>(e(),ee(ne,{key:t.id,todo:t,"collapsed-subtasks":S.value,onToggleState:Ue,onAddSubtask:ze,onDeleteTodo:Be,onEditText:Ve,onToggleCollapse:He,onDragStart:at,onDragEnd:ot,onDragOver:st,onDragLeave:ct,onDrop:lt},null,8,[`todo`,`collapsed-subtasks`]))),128))])):(e(),c(`div`,de,[T.value?(e(),c(o,{key:0},[g(` '`+t(T.value)+`'에 대한 검색 결과가 없습니다. `,1)],64)):b.value?(e(),c(o,{key:1},[a[4]||=g(` 할일 목록이 없습니다.`,-1),a[5]||=p(`br`,null,null,-1),a[6]||=g(`'할일 목록 불러오기' 버튼으로 목록을추가하세요. `,-1)],64)):(e(),c(o,{key:2},[g(` 탭을 선택하거나 '+' 버튼을 눌러 새 탭을 만드세요. `)],64))]))]),p(`dialog`,{ref_key:`markdownModal`,ref:D,class:`modal`},[a[7]||=p(`h2`,null,`새 할일 목록 불러오기`,-1),n(p(`textarea`,{ref_key:`modalMarkdownInput`,ref:A,"onUpdate:modelValue":a[1]||=e=>P.value=e,placeholder:`여기에 할일 목록을 마크다운 형식으로 입력하세요.
들여쓰기를 사용하여 하위 작업을 만들 수 있습니다.`,onKeydown:it},null,544),[[m,P.value]]),p(`div`,{class:`dialog-actions`},[p(`button`,{onClick:Z,id:`confirmLoadBtn`},`불러오기`),p(`button`,{onClick:tt,id:`closeModalBtn`},`취소`)])],512),p(`dialog`,{ref_key:`exportModal`,ref:O,class:`modal`},[a[8]||=i(`<h2 data-v-921045fd>할일 목록 수정 및 내보내기</h2><p data-v-921045fd>진행상황 포함 마크다운: <code data-v-921045fd>- [ ]</code> 시작전, <code data-v-921045fd>- [o]</code> 진행중, <code data-v-921045fd>- [x]</code> 완료. 내용을 수정한 뒤 적용할 수 있습니다.</p><p class="export-textarea-hint" title="Ctrl+Enter: 편집 내용 적용 · Esc: 닫기 · Tab/Shift+Tab: 들여쓰기 · Alt+↑/↓: 줄 이동 · Ctrl+Shift+K/Ctrl+D: 줄 삭제" data-v-921045fd><mark data-v-921045fd>Ctrl</mark>+<mark data-v-921045fd>Enter</mark>: 적용 · <mark data-v-921045fd>Esc</mark>: 닫기 · <mark data-v-921045fd>Tab</mark> / <mark data-v-921045fd>Shift</mark>+<mark data-v-921045fd>Tab</mark>: 들여쓰기 · <mark data-v-921045fd>Alt</mark>+<mark data-v-921045fd>↑</mark> / <mark data-v-921045fd>Alt</mark>+<mark data-v-921045fd>↓</mark>: 줄 이동 · <mark data-v-921045fd>Ctrl</mark>+<mark data-v-921045fd>Shift</mark>+<mark data-v-921045fd>K</mark> / <mark data-v-921045fd>Ctrl</mark>+<mark data-v-921045fd>D</mark>: 줄 삭제 </p>`,3),n(p(`textarea`,{ref_key:`exportTextarea`,ref:j,"onUpdate:modelValue":a[2]||=e=>F.value=e,placeholder:`내보낼 할일 목록이 여기에 표시됩니다.`,title:`Ctrl+Enter: 편집 내용 적용 · Esc: 닫기 · Tab/Shift+Tab: 들여쓰기 · Alt+↑/↓: 줄 이동 · Ctrl+Shift+K/Ctrl+D: 줄 삭제`,onKeydown:rt},null,544),[[m,F.value]]),p(`div`,{class:`dialog-actions`},[p(`button`,{onClick:Ze,class:`apply-export-btn`},`편집 내용 적용`),p(`button`,{onClick:Xe},`클립보드에 복사`),p(`button`,{onClick:Q},`닫기`)])],512),p(`dialog`,{ref_key:`customModal`,ref:k,class:`modal`},[p(`h3`,null,t(ge.value),1),p(`p`,null,t(_e.value),1),I.value===`prompt`?n((e(),c(`input`,{key:0,type:`text`,ref_key:`customModalInput`,ref:M,"onUpdate:modelValue":a[3]||=e=>L.value=e,onKeydown:f(Oe,[`enter`])},null,544)),[[m,L.value]]):l(``,!0),p(`div`,fe,[ve.value?(e(),c(`button`,{key:0,ref_key:`customModalOkBtn`,ref:N,class:`custom-modal-ok`,onClick:Oe},t(be.value),513)):l(``,!0),ye.value?(e(),c(`button`,{key:1,class:`custom-modal-cancel`,onClick:ke},t(xe.value),1)):l(``,!0)])],512)]))}},[[`__scopeId`,`data-v-921045fd`]]);export{T as default};