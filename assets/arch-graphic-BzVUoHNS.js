import{C as e,D as t,E as n,M as r,O as i,S as a,T as o,_ as s,b as c,f as l,h as u,j as d,l as f,p,r as m,u as h,v as g,w as _,x as v,y}from"./index-D0aBWOAh.js";import{t as b}from"./_plugin-vue_export-helper-9n1O4nl6.js";import{t as x}from"./QuestionItem-DZyYO380.js";var S=[`data-theme`],C={style:{"background-color":`transparent`,padding:`1rem`,"margin-bottom":`2rem`}},w={style:{"max-width":`1200px`,margin:`0 auto`}},T={class:`settings-content`},E={class:`theme-switch`},D={class:`dialog-buttons`},O={class:`progress-box`},ee={class:`progress-bar`},te={class:`progress-stats`},ne={class:`container`},k={id:`questions`,class:`questions-container`},A=b({__name:`index`,setup(b){let A={ABV:`Above`,AB:`Anchor Bolt`,"A/C":`Air Conditioner`,AD:`Access Door`,ADD:`Addition`,ADJ:`Adjust`,AFF:`Above Finished Floor`,AFG:`Above Finished Grade`,ALT:`Alternate`,"APP'D":`Approved`,ARCH:`Architect, Architectural`,ASPH:`Asphalt`,AWG:`American wire gauge`,BC:`Bookcase`,BD:`Board`,BL:`Building Line`,BLDG:`Building`,BLK:`Block`,BM:`Beam`,BOF:`Bottom of footing`,BOW:`Bottom of wall`,BRG:`Bearing`,BU:`Built up`,BTM:`Bottom`,CSMNT:`Casement`,CABT:`Cabinet`,CC:`Center-to-Center`,CD:`Construction document`,CEM:`Cement`,CL:`Center line`,CH:`Channel`,CI:`Cast Iron`,CIP:`Cast in place`,CLG:`Ceiling`,CMU:`Concrete Masonry Unit`,CO:`Clean Out`,COL:`Column`,CONT:`Continuous`,CONTR:`Contractor`,CONC:`Concrete`,CPT:`Carpet`,CT:`Ceramic Tile`,"D/W":`Dishwasher`,DBL:`Double`,DEMO:`Demolition`,DIA:`Diameter`,DIM:`Dimension`,DL:`Dead Load`,DN:`Down`,DR:`Door`,EA:`Each`,ED:`Edge distance`,EJ:`Expansion joint`,ELEV:`Elevation`,ELECT:`Electric, electrical`,EQ:`Equal`,EQUIP:`Equipment`,EST:`Estimate`,EW:`Each way`,EXC:`Excavate`,EXIST:`Existing`,EXT:`Exterior`,FA:`Fire alarm`,FAO:`Finish all over`,FCO:`Floor clean out`,FD:`Floor drain`,FE:`Fire extinguisher`,FAB:`Fabricate`,FDN:`Foundation`,FFL:`Finished floor level`,FIN:`Finish`,FL:`Floor level`,FLR:`Floor`,FRPF:`Fireproof`,GA:`Gauge`,GALV:`Galvanized`,GAR:`Garage`,GC:`General Contractor`,GFCI:`Ground Fault Circuit Interrupt`,GL:`Glass`,GM:`Grade mark`,GT:`Glazed tile`,GYP:`Gypsum`,HB:`Hose bib`,HC:`Hollow core`,HDBD:`Hardboard`,HDW:`Hardware`,HGT:`Height`,HOR:`Horizontal`,HR:`Hour or Handrail`,HTR:`Heater`,HV:`High voltage`,HVAC:`Heating, Venting and Air Conditioning, heating venting air conditioning`,HW:`Hot water`};i(null);let j=i(null),M=i(null),N=i(!1),P=i(`light`),F=i(!1),I=i(0),L=i(0),R=i([]),z=i(!1),B=i({}),V=i(``),H=(e,t)=>{t&&(B.value[e]=t)},U=()=>{let e=localStorage.getItem(`theme`);if(e)P.value=e,F.value=e===`dark`;else{let e=window.matchMedia(`(prefers-color-scheme: dark)`).matches;F.value=e,P.value=e?`dark`:`light`}document.body.setAttribute(`data-theme`,P.value)},re=()=>{P.value=F.value?`dark`:`light`,document.body.setAttribute(`data-theme`,P.value),localStorage.setItem(`theme`,P.value)};o(N,e=>{e&&M.value?M.value.showModal():M.value&&M.value.close()});let W=()=>{let e=R.value.filter(e=>{let t=B.value[e.abbr];return t&&t.inputValue?.trim()!==``}).length,t=R.value.length;I.value=t>0?e/t*100:0;let n=R.value.filter(e=>{let t=B.value[e.abbr];return t&&t.grade()===!0}).length;L.value=e>0?n/e*100:0},G=()=>{V.value=`총점: ${R.value.reduce((e,t)=>{let n=B.value[t.abbr];return n&&n.grade()===!0?e+1:e},0)} / ${R.value.length}`},K=()=>{G(),j.value&&j.value.scrollIntoView({behavior:`smooth`})},q=()=>{let e={questionOrder:R.value.map(e=>e.abbr),questions:R.value.map(e=>{let t=B.value[e.abbr];return t?t.saveState():{abbr:e.abbr,value:``,isGraded:!1,isIncorrect:!1,isVisible:!0}}),lastFocusedInput:localStorage.getItem(`lastFocusedInput`),isIncorrectOnlyMode:z.value};localStorage.setItem(`examState`,JSON.stringify(e))},J=async()=>{let e=localStorage.getItem(`examState`);if(e){let t=JSON.parse(e);if(z.value=t.isIncorrectOnlyMode||!1,t.questionOrder&&Array.isArray(t.questionOrder)){let e=new Map(R.value.map(e=>[e.abbr,e])),n=[];t.questionOrder.forEach(t=>{let r=e.get(t);r&&n.push(r)}),R.value.forEach(e=>{t.questionOrder.includes(e.abbr)||n.push(e)}),R.value=n}await y();let n={};if(t.questions&&t.questions.forEach(e=>{e.abbr&&(n[e.abbr]=e)}),R.value.forEach(e=>{let t=B.value[e.abbr];t&&(n[e.abbr]?t.loadState(n[e.abbr]):t.loadState({value:``,isGraded:!1,isIncorrect:!1,isVisible:!0}))}),z.value){let e=1;R.value.forEach(t=>{let n=B.value[t.abbr];n&&n.grade()===!1?(n.reset(!0),n.setVisible(!0),t.index=e++):n&&n.setVisible(!1)})}else R.value.forEach(e=>{e.index=e.originalIndex;let t=B.value[e.abbr];t&&t.setVisible(!0)});G(),W()}else await y(),R.value.forEach(e=>{let t=B.value[e.abbr];t&&t.loadState({value:``,isGraded:!1,isIncorrect:!1,isVisible:!0})})},Y=()=>{if(R.value.every(e=>{let t=B.value[e.abbr];return t&&t.inputValue?.trim()!==``})){let e=R.value.filter(e=>{let t=B.value[e.abbr];return t&&t.grade()===!1});e.length>0&&setTimeout(()=>{confirm(`${e.length}개의 문제를 틀렸습니다. 틀린 문제만 다시 풀어보시겠습니까?`)&&X()},500)}},X=async()=>{z.value=!0;let e=1;await y(),R.value.forEach(t=>{let n=B.value[t.abbr];n&&n.grade()===!1?(n.reset(!0),n.setVisible(!0),t.index=e++):n&&n.setVisible(!1)}),q(),await y();let t=R.value.find(e=>{let t=B.value[e.abbr];return t&&t.grade()===!1&&t.isVisible});if(t&&B.value[t.abbr]){let e=document.getElementById(`ans-${t.abbr}`);e&&setTimeout(()=>{e.focus(),e.scrollIntoView({behavior:`smooth`,block:`center`})},100)}},ie=()=>{let e=confirm(`모든 문제를 초기화하시겠습니까? (Ctrl + R을 누르면 틀린 문제만 유지됩니다)`);Q(e),q()},Z=async()=>{if(confirm(`모든 진행 상황이 초기화됩니다. 계속하시겠습니까?`)){let e=R.value.map(e=>e.abbr);localStorage.removeItem(`examState`),localStorage.removeItem(`lastFocusedInput`);let t={questionOrder:e,questions:[],isIncorrectOnlyMode:!1};localStorage.setItem(`examState`,JSON.stringify(t)),await y(),R.value.forEach(e=>{let t=B.value[e.abbr];t&&t.loadState({value:``,isGraded:!1,isIncorrect:!1,isVisible:!0}),e.index=e.originalIndex}),z.value=!1,G(),W(),q()}},Q=async(e=!1)=>{e&&(await y(),R.value.forEach(e=>{let t=B.value[e.abbr];t&&t.setVisible(!0),e.index=e.originalIndex}),z.value=!1),await y(),R.value.forEach(e=>{let t=B.value[e.abbr];t&&(t.grade()===!1?(t.reset(!0),t.setVisible(!0)):t.inputValue?.trim()===``?t.setVisible(!0):t.setVisible(!1))}),G(),W(),await y();let t=R.value.find(e=>{let t=B.value[e.abbr];return t&&t.isVisible&&t.inputValue?.trim()===``});if(t){let e=document.getElementById(`ans-${t.abbr}`);e&&setTimeout(()=>{e.focus(),e.scrollIntoView({behavior:`smooth`,block:`center`})},100)}},$=e=>{e.ctrlKey&&e.key===`r`&&(e.preventDefault(),Q(!1),q()),e.ctrlKey&&e.shiftKey&&e.key===`R`&&(e.preventDefault(),Z())},ae=e=>{localStorage.setItem(`lastFocusedInput`,e.abbr);let t=document.getElementById(`ans-${e.abbr}`);t&&t.scrollIntoView({behavior:`smooth`,block:`center`})},oe=e=>{G(),W(),q(),Y()},se=()=>{q()},ce=()=>{G(),W()},le=e=>{let t=R.value.findIndex(t=>t.abbr===e.abbr),n=null;for(let e=t+1;e<R.value.length;e++){let t=B.value[R.value[e].abbr];if(t&&t.isVisible&&t.inputValue?.trim()===``){n=R.value[e];break}}if(!n)for(let e=0;e<R.value.length;e++){let t=B.value[R.value[e].abbr];if(t&&t.isVisible&&t.inputValue?.trim()===``){n=R.value[e];break}}if(n){let e=document.getElementById(`ans-${n.abbr}`);e&&setTimeout(()=>{e.focus(),e.scrollIntoView({behavior:`smooth`,block:`center`})},100)}};return c(async()=>{U();let e=localStorage.getItem(`examState`),t=!0,n=null;if(e)try{let r=JSON.parse(e);r.questionOrder&&Array.isArray(r.questionOrder)&&(n=r.questionOrder,t=!1)}catch(e){console.error(`Failed to parse saved state:`,e)}if(t){let e=Object.entries(A).sort(()=>Math.random()-.5),t=1;e.forEach(([e,n])=>{R.value.push({abbr:e,answer:n,index:t++,originalIndex:t-1,inputValue:``})})}else{let e=new Map(Object.entries(A)),t=1;n.forEach(n=>{let r=e.get(n);r&&R.value.push({abbr:n,answer:r,index:t++,originalIndex:t-1,inputValue:``})}),Object.entries(A).forEach(([e,r])=>{n.includes(e)||R.value.push({abbr:e,answer:r,index:t++,originalIndex:t-1,inputValue:``})})}await y(),await J();let r=R.value.filter(e=>{let t=B.value[e.abbr];return t&&t.isVisible&&(!t.inputValue||t.inputValue.trim()===``)}).sort((e,t)=>e.index-t.index)[0];if(r){let e=document.getElementById(`ans-${r.abbr}`);e&&setTimeout(()=>{e.focus(),e.scrollIntoView({behavior:`smooth`,block:`center`})},100)}else if(R.value.length>0){let e=R.value.filter(e=>{let t=B.value[e.abbr];return t&&t.isVisible}).sort((e,t)=>e.index-t.index)[0];if(e){let t=document.getElementById(`ans-${e.abbr}`);t&&setTimeout(()=>{t.focus(),t.scrollIntoView({behavior:`smooth`,block:`center`})},100)}}document.addEventListener(`keydown`,$),window.addEventListener(`beforeunload`,q),W()}),v(()=>{q(),document.removeEventListener(`keydown`,$),window.removeEventListener(`beforeunload`,q)}),(i,o)=>{let c=_(`router-link`);return a(),u(`div`,{class:`arch-graphic-app`,"data-theme":P.value},[o[11]||=l(`link`,{href:`https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap`,rel:`stylesheet`},null,-1),l(`nav`,C,[l(`div`,w,[g(c,{to:`/`,style:{color:`var(--text-primary)`,"text-decoration":`none`,display:`inline-flex`,"align-items":`center`,gap:`0.5rem`,"font-size":`1.2rem`,"font-weight":`500`}},{default:n(()=>[...o[3]||=[l(`span`,{class:`material-icons`,style:{"font-size":`1.5rem`}},`home`,-1)]]),_:1}),g(c,{to:`/arch-graphic/endterm`,style:{color:`var(--primary-color)`,"text-decoration":`none`,"margin-left":`1.5rem`,"font-size":`1.1rem`,"font-weight":`400`}},{default:n(()=>[...o[4]||=[s(`기말고사`,-1)]]),_:1})])]),l(`button`,{class:`settings-button`,onClick:o[0]||=e=>N.value=!0},`설정`),l(`dialog`,{ref_key:`settingsDialog`,ref:M,class:`settings-dialog`},[l(`div`,T,[o[6]||=l(`h3`,{class:`settings-title`},`설정`,-1),l(`div`,E,[t(l(`input`,{type:`checkbox`,id:`themeSwitch`,"onUpdate:modelValue":o[1]||=e=>F.value=e,onChange:re},null,544),[[m,F.value]]),o[5]||=l(`label`,{for:`themeSwitch`},`다크 모드`,-1)]),l(`div`,D,[l(`button`,{class:`secondary`,onClick:o[2]||=e=>N.value=!1},`닫기`)])])],512),l(`div`,O,[o[7]||=l(`h3`,null,`진행 상황`,-1),l(`div`,ee,[l(`div`,{class:`progress-fill`,style:d({width:I.value+`%`})},null,4)]),l(`div`,te,[l(`span`,null,r(Math.round(I.value))+`%`,1),l(`span`,null,`정답률: `+r(Math.round(L.value))+`%`,1)])]),l(`div`,ne,[o[9]||=l(`h1`,null,`중간고사: Graphical Communications in Construction`,-1),o[10]||=l(`p`,{class:`subtitle`},`범위: A ~ H 약어`,-1),l(`form`,{onSubmit:f(K,[`prevent`])},[l(`div`,k,[(a(!0),u(h,null,e(R.value,e=>(a(),p(x,{key:e.abbr,ref_for:!0,ref:t=>H(e.abbr,t),question:e,onFocus:ae,onBlur:oe,onInput:se,onGrade:ce,onEnterCorrect:le},null,8,[`question`]))),128))]),l(`div`,{class:`button-group`},[l(`button`,{type:`button`,onClick:ie},`리셋`),l(`button`,{type:`button`,class:`danger`,onClick:Z},`하드 리셋`),o[8]||=l(`button`,{type:`submit`},`제출`,-1)])],32),l(`div`,{id:`score`,ref_key:`scoreElement`,ref:j},r(V.value),513)])],8,S)}}},[[`__scopeId`,`data-v-022fdead`]]);export{A as default};