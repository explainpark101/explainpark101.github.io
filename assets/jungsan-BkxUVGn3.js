import{i as e,n as t,o as n,s as r,t as ee}from"./useConfirmDialog-07vVrZ6s.js";import{C as i,D as a,E as o,M as s,O as c,S as l,T as te,_ as u,b as d,d as ne,f,h as p,k as m,l as h,m as g,o as _,r as re,u as v,v as y,w as ie,y as ae}from"./index-CxO5bnR4.js";import{t as oe}from"./_plugin-vue_export-helper-9n1O4nl6.js";var se={class:`jungsan-container`},ce={class:`d-flex`},le={style:{display:`flex`,"justify-content":`space-between`,"align-items":`center`}},ue={style:{display:`flex`,"align-items":`center`,"justify-content":`end`,gap:`0.2rem`,"flex-wrap":`wrap`}},de={class:`input-group`},fe={class:`input-group`},pe={id:`tablesContainer`},me={class:`input-group`},he=[`onUpdate:modelValue`],ge={class:`input-group`},b=[`onUpdate:modelValue`],x={class:`input-group`},S=[`onUpdate:modelValue`],C={class:`input-group`},w=[`onUpdate:modelValue`],T={class:`checkbox-group`},E=[`onUpdate:modelValue`],D={class:`support-per-person`},O={key:0,class:`remaining-support`,style:{"font-size":`1.2rem`}},k={key:0},A={key:1,class:`remaining-support`},j=[`href`,`download`],M={class:`dialog-title`},N={class:`dialog-message`},P={class:`dialog-actions`},F=`jungsanFormData`,I=oe({__name:`index`,setup(oe){let I=c(1),L=c(0),R=c([]),z=c(null),B=c(null),{showDialog:_e,dialogTitle:ve,dialogMessage:ye,dialogRef:be,confirmButtonRef:xe,isAlert:Se,showConfirm:V,showAlert:H,handleConfirm:U,handleCancel:W,handleDialogClick:G}=ee(),Ce=e=>({memberCount:e.memberCount||0,guestCount:e.guestCount||0,foodPrice:e.foodPrice||0,memo:e.memo||``,hasAlcohol:e.hasAlcohol||!1}),we=()=>R.value.length===0?null:{tableCount:I.value,totalSupport:L.value,tableData:R.value.map(e=>Ce(e))},K=e=>{I.value=e.tableCount||1,L.value=e.totalSupport||0,$(),e.tableData&&e.tableData.forEach((e,t)=>{R.value[t]&&(R.value[t].memberCount=e.memberCount||0,R.value[t].guestCount=e.guestCount||0,R.value[t].foodPrice=e.foodPrice||0,R.value[t].memo=e.memo||``,R.value[t].hasAlcohol=e.hasAlcohol||!1)})},{saveToLocalStorage:Te,loadFromLocalStorage:Ee,tryRestoreFromQuery:De,shareLink:q,clearStorage:Oe,isRestoring:ke}=r(F,we,K,V,H),{downloadLink:Ae,downloadUrl:je,downloadFilename:Me,fileInput:J,exportJson:Y,importJson:X,handleFileImport:Z}=t(F,K,n,H),Ne=async()=>{z.value=null;let t=e(R.value,L.value);if(t.error){await H(t.error,`ì˜¤ë¥˜`);return}z.value=t,await ae(),B.value&&B.value.scrollIntoView({behavior:`smooth`,block:`start`})},Q=ne(()=>{if(!z.value)return null;let e=e=>e==null||isNaN(e)?`0`:Math.round(e).toLocaleString();return!z.value.results||!Array.isArray(z.value.results)||z.value.results.length===0?null:{...z.value,formattedSupportPerMember:e(z.value.supportPerMember),formattedRemainingSupportSum:z.value.remainingSupportSum?e(z.value.remainingSupportSum):null,formattedResults:z.value.results.map(t=>({...t,formattedMemberPayment:e(t.memberPayment),formattedGuestPayment:e(t.guestPayment),formattedRemainingSupport:t.remainingSupport?e(t.remainingSupport):null}))}}),$=()=>{let e=I.value;R.value=Array.from({length:e},()=>({memberCount:0,guestCount:0,foodPrice:0,memo:``,hasAlcohol:!1}))},Pe=()=>{$()},Fe=async()=>{await V(`ì´ˆê¸°í™” í™•ì¸`,`ì •ë§ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ˆê¸°í™”ì‹œ ì„ì‹œì €ì¥ëœ ë°ì´í„°ëŠ” ì‚­ì œë˜ê³  ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)&&(Oe(),I.value=1,L.value=0,$(),z.value=null)};return te([I,L,R],()=>{ke.value||Te()},{deep:!0}),d(async()=>{await De()||(localStorage.getItem(F)?await Ee():$())}),(e,t)=>{let n=ie(`router-link`);return l(),p(`div`,se,[f(`div`,ce,[y(n,{to:`/jungsan/alchol`,class:`md-btn`},{default:o(()=>[...t[10]||=[u(`ì¼ë°˜ì¸ / ìˆ ê³ ë˜ êµ¬ë¶„ ì •ì‚°ê¸°`,-1)]]),_:1})]),f(`div`,le,[t[16]||=f(`h1`,null,`ì–¸ë„¤ì„ë“œ íšŒì‹ ì •ì‚° ê³„ì‚°ê¸°`,-1),f(`div`,ue,[y(n,{to:`/`,class:`home-button`},{default:o(()=>[...t[11]||=[f(`span`,{class:`material-icons`},`home`,-1),u(`ì•± ëª©ë¡ `,-1)]]),_:1}),f(`button`,{onClick:Fe,style:{"margin-left":`1rem`}},[...t[12]||=[f(`span`,{class:`material-icons`},`restart_alt`,-1),u(`ì´ˆê¸°í™” `,-1)]]),f(`button`,{onClick:t[0]||=(...e)=>m(Y)&&m(Y)(...e),style:{"margin-left":`0.5rem`}},[...t[13]||=[f(`span`,{class:`material-icons`},`file_upload`,-1),u(`JSON ë‚´ë³´ë‚´ê¸° `,-1)]]),f(`button`,{onClick:t[1]||=(...e)=>m(X)&&m(X)(...e),style:{"margin-left":`0.5rem`}},[...t[14]||=[f(`span`,{class:`material-icons`},`file_download`,-1),u(`JSON ê°€ì ¸ì˜¤ê¸° `,-1)]]),f(`button`,{onClick:t[2]||=(...e)=>m(q)&&m(q)(...e),style:{"margin-left":`0.5rem`}},[...t[15]||=[f(`span`,{class:`material-icons`},`link`,-1),u(`ë§í¬ë¡œ ê³µìœ  `,-1)]])])]),f(`div`,de,[t[18]||=f(`label`,{for:`tableCount`},`í…Œì´ë¸” ê°œìˆ˜`,-1),a(f(`input`,{type:`number`,id:`tableCount`,"onUpdate:modelValue":t[3]||=e=>I.value=e,min:`1`,onInput:Pe},null,544),[[_,I.value,void 0,{number:!0}]]),f(`button`,{onClick:$},[...t[17]||=[f(`span`,{class:`material-icons`},`add_circle`,-1),u(` í…Œì´ë¸” ìƒì„± `,-1)]])]),f(`div`,fe,[t[19]||=f(`label`,{for:`totalSupport`},`ì´ íšŒì‹ ì§€ì›ë¹„`,-1),a(f(`input`,{type:`number`,id:`totalSupport`,"onUpdate:modelValue":t[4]||=e=>L.value=e,min:`0`},null,512),[[_,L.value,void 0,{number:!0}]])]),f(`div`,pe,[(l(!0),p(v,null,i(R.value,(e,n)=>(l(),p(`div`,{key:n,class:`table-container`},[f(`h3`,null,`í…Œì´ë¸” `+s(n+1),1),f(`div`,me,[t[20]||=f(`label`,null,`ë¶€ì› ìˆ˜`,-1),a(f(`input`,{type:`number`,"onUpdate:modelValue":t=>e.memberCount=t,min:`0`},null,8,he),[[_,e.memberCount,void 0,{number:!0}]])]),f(`div`,ge,[t[21]||=f(`label`,null,`ë‚œì… ìˆ˜`,-1),a(f(`input`,{type:`number`,"onUpdate:modelValue":t=>e.guestCount=t,min:`0`},null,8,b),[[_,e.guestCount,void 0,{number:!0}]])]),f(`div`,x,[t[22]||=f(`label`,null,`ë©”ëª¨`,-1),a(f(`textarea`,{"onUpdate:modelValue":t=>e.memo=t,rows:`2`,placeholder:`ë¶€ì›, ë‚œì… ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”`},null,8,S),[[_,e.memo]])]),f(`div`,C,[t[23]||=f(`label`,null,`ìŒì‹ ê°€ê²©`,-1),a(f(`input`,{type:`number`,"onUpdate:modelValue":t=>e.foodPrice=t,min:`0`},null,8,w),[[_,e.foodPrice,void 0,{number:!0}]])]),f(`div`,T,[f(`label`,null,[a(f(`input`,{type:`checkbox`,"onUpdate:modelValue":t=>e.hasAlcohol=t},null,8,E),[[re,e.hasAlcohol]]),t[24]||=u(` ìˆ  ì„­ì·¨ `,-1)])])]))),128))]),f(`button`,{onClick:Ne,id:`calc-button`},[...t[25]||=[f(`span`,{class:`material-icons`},`calculate`,-1),u(` ì •ì‚° ê³„ì‚°í•˜ê¸° `,-1)]]),Q.value&&Q.value.formattedResults&&Q.value.formattedResults.length>0?(l(),p(`div`,{key:0,id:`result`,ref_key:`resultRef`,ref:B,class:`result`},[t[30]||=f(`h2`,null,`ì •ì‚° ê²°ê³¼`,-1),f(`div`,D,`ì¸ë‹¹ ì§€ì›ê¸ˆ: `+s(Q.value.formattedSupportPerMember)+`ì›`,1),Q.value.formattedRemainingSupportSum?(l(),p(`div`,O,[t[26]||=f(`strong`,null,`ì´ ë‚¨ì€ ì§€ì›ê¸ˆ: `,-1),u(` `+s(Q.value.formattedRemainingSupportSum)+`ì› `,1)])):g(``,!0),(l(!0),p(v,null,i(Q.value.formattedResults,(e,n)=>(l(),p(`div`,{key:n,class:`table-container`},[f(`h3`,null,`í…Œì´ë¸” `+s(e.tableNumber)+` `+s(e.hasAlcohol?`ğŸº`:``),1),f(`p`,null,[t[27]||=f(`strong`,null,`ë©”ëª¨:`,-1),u(` `+s(e.memo||`ì—†ìŒ`),1)]),f(`p`,null,[f(`strong`,null,`ë¶€ì›(`+s(e.memberCount)+`ëª…) ì •ì‚°ê¸ˆì•¡:`,1),u(` `+s(e.formattedMemberPayment)+`ì›`,1)]),f(`p`,null,[f(`strong`,null,`ë‚œì…(`+s(e.guestCount)+`ëª…) ì •ì‚°ê¸ˆì•¡:`,1),u(` `+s(e.formattedGuestPayment)+`ì›`,1)]),e.hasAlcohol?(l(),p(`p`,k,[...t[28]||=[f(`strong`,null,`ìˆ  ì„­ì·¨:`,-1),u(` ì˜ˆ`,-1)]])):g(``,!0),e.formattedRemainingSupport?(l(),p(`p`,A,[t[29]||=f(`strong`,null,`ë‚¨ì€ ì§€ì›ê¸ˆ:`,-1),u(` `+s(e.formattedRemainingSupport)+`ì› `,1)])):g(``,!0)]))),128))],512)):g(``,!0),f(`a`,{ref_key:`downloadLink`,ref:Ae,href:m(je),download:m(Me),style:{display:`none`}},null,8,j),f(`input`,{ref_key:`fileInput`,ref:J,type:`file`,accept:`application/json`,style:{display:`none`},onChange:t[5]||=(...e)=>m(Z)&&m(Z)(...e)},null,544),f(`dialog`,{ref_key:`dialogRef`,ref:be,class:`confirm-dialog`,onClick:t[9]||=(...e)=>m(G)&&m(G)(...e)},[f(`div`,{class:`dialog-content`,onClick:t[8]||=h(()=>{},[`stop`])},[f(`h3`,M,s(m(ve)),1),f(`p`,N,s(m(ye)),1),f(`div`,P,[m(Se)?g(``,!0):(l(),p(`button`,{key:0,onClick:t[6]||=(...e)=>m(W)&&m(W)(...e),class:`dialog-btn dialog-btn-cancel`},`ì·¨ì†Œ`)),f(`button`,{ref_key:`confirmButtonRef`,ref:xe,onClick:t[7]||=(...e)=>m(U)&&m(U)(...e),class:`dialog-btn dialog-btn-confirm`,autofocus:``},`í™•ì¸`,512)])])],512)])}}},[[`__scopeId`,`data-v-95639ce4`]]);export{I as default};