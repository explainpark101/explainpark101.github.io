import{A as e,C as t,D as n,E as r,N as i,O as a,T as ee,b as o,d as s,f as c,g as l,h as u,k as d,p as f,s as p,u as m,v as h,w as g,x as _,y as v}from"./index-Cts1_9uE.js";import{t as y}from"./_plugin-vue_export-helper-9n1O4nl6.js";import{a as te,n as ne,r as re,s as ie,t as ae}from"./useConfirmDialog-EGNpdPk_.js";function oe(){let e=e=>{e&&(e.style.height=`auto`,e.style.height=e.scrollHeight+`px`)};return{autoGrowTextarea:e,applyAutoGrowToRefs:async t=>{await o(),t.forEach(t=>{t.value&&e(t.value)})},handleAutoGrow:t=>{e(t.target)}}}var se={class:`jungsan-alchol-container`},ce={class:`d-flex`},le={style:{display:`flex`,"justify-content":`space-between`,"align-items":`center`}},ue={style:{display:`flex`,"align-items":`center`,"justify-content":`end`,gap:`0.2rem`,"flex-wrap":`wrap`}},de={class:`input-group-values`},fe={class:`input-group`},pe={class:`input-group`},b={class:`input-group`},x={class:`input-group-table`},me={class:`input-group-cell`},he={class:`input-group-cell`},ge={class:`input-group-cell`},_e={class:`input-group-cell`},ve={class:`support-per-person`},ye={class:`result-table`},be=[`href`,`download`],xe={class:`dialog-title`},Se={class:`dialog-message`},Ce={class:`dialog-actions`},S=`jungsanFormData-alchol`,C=y({__name:`index`,setup(y){let C=d(0),w=d(0),T=d(0),E=d(0),D=d(0),O=d(0),k=d(0),A=d(``),j=d(``),M=d(``),N=d(``),P=d(null),F=d(null),I=d(null),L=d(null),R=d(null),z=d(null),{showDialog:we,dialogTitle:Te,dialogMessage:Ee,dialogRef:De,confirmButtonRef:B,isAlert:Oe,showConfirm:V,showAlert:H,handleConfirm:U,handleCancel:W,handleDialogClick:G}=ae(),ke=()=>({totalSupport:C.value,memberDrink:E.value,guestDrink:D.value,memberNoDrink:O.value,guestNoDrink:k.value,foodPrice:w.value,alcoholPrice:T.value,memberDrinkMemo:A.value||``,guestDrinkMemo:j.value||``,memberNoDrinkMemo:M.value||``,guestNoDrinkMemo:N.value||``}),K=async e=>{C.value=e.totalSupport||0,E.value=e.memberDrink||0,D.value=e.guestDrink||0,O.value=e.memberNoDrink||0,k.value=e.guestNoDrink||0,w.value=e.foodPrice||0,T.value=e.alcoholPrice||0,A.value=e.memberDrinkMemo||``,j.value=e.guestDrinkMemo||``,M.value=e.memberNoDrinkMemo||``,N.value=e.guestNoDrinkMemo||``,await Z([I,L,R,z])},{saveToLocalStorage:Ae,loadFromLocalStorage:je,tryRestoreFromQuery:Me,shareLink:q,clearStorage:Ne,isRestoring:Pe}=ie(S,ke,K,V,H),{downloadLink:Fe,downloadUrl:Ie,downloadFilename:Le,fileInput:Re,exportJson:J,importJson:Y,handleFileImport:X}=ne(S,K,te,H),{applyAutoGrowToRefs:Z,handleAutoGrow:Q}=oe(),ze=async()=>{P.value=null;let e=re({totalSupport:C.value,foodPrice:w.value,alcoholPrice:T.value,memberDrink:E.value,guestDrink:D.value,memberNoDrink:O.value,guestNoDrink:k.value});if(e.error){await H(e.error,`ì˜¤ë¥˜`);return}P.value=e,await o(),F.value&&F.value.scrollIntoView({behavior:`smooth`,block:`start`})},$=c(()=>{if(!P.value)return null;let e=e=>e==null||isNaN(e)?`-`:Math.round(e).toLocaleString();return!P.value.results||!Array.isArray(P.value.results)||P.value.results.length===0?null:{...P.value,formattedSupportPerMember:e(P.value.supportPerMember),formattedResults:P.value.results.map(t=>({...t,formattedPay:e(t.pay),formattedSupport:t.support!==null&&t.support!==void 0?e(t.support)+`ì›`:`-`}))}}),Be=async e=>{e.preventDefault(),await ze()},Ve=async()=>{await V(`ì´ˆê¸°í™” í™•ì¸`,`ì •ë§ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ˆê¸°í™”ì‹œ ì„ì‹œì €ì¥ëœ ë°ì´í„°ëŠ” ì‚­ì œë˜ê³  ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)&&(Ne(),C.value=0,E.value=0,D.value=0,O.value=0,k.value=0,w.value=0,T.value=0,A.value=``,j.value=``,M.value=``,N.value=``,P.value=null)};return r([C,w,T,E,D,O,k,A,j,M,N],()=>{Pe.value||Ae()}),_(async()=>{await Me()||(localStorage.getItem(S)&&await je(),await Z([I,L,R,z]))}),(r,o)=>{let c=ee(`router-link`);return t(),l(`div`,se,[f(`div`,ce,[v(c,{to:`/jungsan`,class:`md-btn`},{default:n(()=>[...o[23]||=[h(`í…Œì´ë¸”ë‹¹ ì •ì‚°ê¸°`,-1)]]),_:1})]),f(`div`,le,[o[28]||=f(`h1`,null,`ì–¸ë„¤ì„ë“œ íšŒì‹ ì •ì‚° ê³„ì‚°ê¸°`,-1),f(`div`,ue,[f(`button`,{onClick:Ve,style:{"margin-left":`1rem`}},[...o[24]||=[f(`span`,{class:`material-icons`},`restart_alt`,-1),h(`ì´ˆê¸°í™” `,-1)]]),f(`button`,{onClick:o[0]||=(...t)=>e(J)&&e(J)(...t),style:{"margin-left":`0.5rem`}},[...o[25]||=[f(`span`,{class:`material-icons`},`file_upload`,-1),h(`JSON ë‚´ë³´ë‚´ê¸° `,-1)]]),f(`button`,{onClick:o[1]||=(...t)=>e(Y)&&e(Y)(...t),style:{"margin-left":`0.5rem`}},[...o[26]||=[f(`span`,{class:`material-icons`},`file_download`,-1),h(`JSON ê°€ì ¸ì˜¤ê¸° `,-1)]]),f(`button`,{onClick:o[2]||=(...t)=>e(q)&&e(q)(...t),style:{"margin-left":`0.5rem`}},[...o[27]||=[f(`span`,{class:`material-icons`},`link`,-1),h(`ë§í¬ë¡œ ê³µìœ  `,-1)]])])]),f(`form`,{id:`input-fields`,onSubmit:m(Be,[`prevent`])},[f(`div`,de,[f(`div`,fe,[o[29]||=f(`label`,{for:`totalSupport`},`ì´ íšŒì‹ ì§€ì›ë¹„`,-1),a(f(`input`,{type:`number`,id:`totalSupport`,"onUpdate:modelValue":o[3]||=e=>C.value=e,min:`0`},null,512),[[p,C.value,void 0,{number:!0}]])]),f(`div`,pe,[o[30]||=f(`label`,{for:`foodPrice`},`ìŒì‹ê°’`,-1),a(f(`input`,{type:`number`,id:`foodPrice`,"onUpdate:modelValue":o[4]||=e=>w.value=e,min:`0`},null,512),[[p,w.value,void 0,{number:!0}]])]),f(`div`,b,[o[31]||=f(`label`,{for:`alcoholPrice`},`ìˆ ê°’`,-1),a(f(`input`,{type:`number`,id:`alcoholPrice`,"onUpdate:modelValue":o[5]||=e=>T.value=e,min:`0`},null,512),[[p,T.value,void 0,{number:!0}]])])]),f(`div`,x,[f(`div`,me,[o[32]||=f(`label`,{for:`memberDrink`},`ğŸº ë¶€ì› (ìˆ  ë§ˆì‹ )`,-1),a(f(`input`,{type:`number`,id:`memberDrink`,"onUpdate:modelValue":o[6]||=e=>E.value=e,min:`0`},null,512),[[p,E.value,void 0,{number:!0}]]),a(f(`textarea`,{id:`memberDrinkMemo`,"onUpdate:modelValue":o[7]||=e=>A.value=e,rows:`1`,placeholder:`ì˜ˆ: í™ê¸¸ë™, ê¹€ì² ìˆ˜`,onInput:o[8]||=(...t)=>e(Q)&&e(Q)(...t),ref_key:`memberDrinkMemoRef`,ref:I},null,544),[[p,A.value]])]),f(`div`,he,[o[33]||=f(`label`,{for:`guestDrink`},`ğŸºğŸ‘¤ ë‚œì… (ìˆ  ë§ˆì‹ )`,-1),a(f(`input`,{type:`number`,id:`guestDrink`,"onUpdate:modelValue":o[9]||=e=>D.value=e,min:`0`},null,512),[[p,D.value,void 0,{number:!0}]]),a(f(`textarea`,{id:`guestDrinkMemo`,"onUpdate:modelValue":o[10]||=e=>j.value=e,rows:`1`,placeholder:`ì˜ˆ: ì´ë‚œì…, ë°•ì™¸ë¶€`,onInput:o[11]||=(...t)=>e(Q)&&e(Q)(...t),ref_key:`guestDrinkMemoRef`,ref:L},null,544),[[p,j.value]])]),f(`div`,ge,[o[34]||=f(`label`,{for:`memberNoDrink`},`ë¶€ì› (ìˆ  ì•ˆ ë§ˆì‹ )`,-1),a(f(`input`,{type:`number`,id:`memberNoDrink`,"onUpdate:modelValue":o[12]||=e=>O.value=e,min:`0`},null,512),[[p,O.value,void 0,{number:!0}]]),a(f(`textarea`,{id:`memberNoDrinkMemo`,"onUpdate:modelValue":o[13]||=e=>M.value=e,rows:`1`,placeholder:`ì˜ˆ: ìµœë¶€ì›, ì •íšŒì›`,onInput:o[14]||=(...t)=>e(Q)&&e(Q)(...t),ref_key:`memberNoDrinkMemoRef`,ref:R},null,544),[[p,M.value]])]),f(`div`,_e,[o[35]||=f(`label`,{for:`guestNoDrink`},`ğŸ‘¤ ë‚œì… (ìˆ  ì•ˆ ë§ˆì‹ )`,-1),a(f(`input`,{type:`number`,id:`guestNoDrink`,"onUpdate:modelValue":o[15]||=e=>k.value=e,min:`0`},null,512),[[p,k.value,void 0,{number:!0}]]),a(f(`textarea`,{id:`guestNoDrinkMemo`,"onUpdate:modelValue":o[16]||=e=>N.value=e,rows:`1`,placeholder:`ì˜ˆ: ì™¸ë¶€1, ì™¸ë¶€2`,onInput:o[17]||=(...t)=>e(Q)&&e(Q)(...t),ref_key:`guestNoDrinkMemoRef`,ref:z},null,544),[[p,N.value]])])]),o[36]||=f(`button`,{type:`submit`,id:`calc-button`},[f(`span`,{class:`material-icons`},`calculate`),h(` ì •ì‚° ê³„ì‚°í•˜ê¸° `)],-1)],32),$.value&&$.value.formattedResults&&$.value.formattedResults.length>0?(t(),l(`div`,{key:0,id:`result`,ref_key:`resultRef`,ref:F,class:`result`},[o[38]||=f(`h2`,null,`ì •ì‚° ê²°ê³¼`,-1),f(`div`,ve,`ë¶€ì› 1ì¸ë‹¹ ì§€ì›ê¸ˆ: `+i($.value.formattedSupportPerMember)+`ì›`,1),f(`table`,ye,[o[37]||=f(`thead`,null,[f(`tr`,null,[f(`th`,null,`êµ¬ë¶„`),f(`th`,null,`ì¸ì›`),f(`th`,null,`1ì¸ë‹¹ ê¸ˆì•¡`),f(`th`,null,`ì§€ì›ê¸ˆ`)])],-1),f(`tbody`,null,[(t(!0),l(s,null,g($.value.formattedResults,(e,n)=>(t(),l(`tr`,{key:n},[f(`td`,null,i(e.label||`-`),1),f(`td`,null,i(e.count||0)+`ëª…`,1),f(`td`,null,i(e.formattedPay||`-`)+`ì›`,1),f(`td`,null,i(e.formattedSupport||`-`),1)]))),128))])])],512)):u(``,!0),f(`a`,{ref_key:`downloadLink`,ref:Fe,href:e(Ie),download:e(Le),style:{display:`none`}},null,8,be),f(`input`,{ref_key:`fileInput`,ref:Re,type:`file`,accept:`application/json`,style:{display:`none`},onChange:o[18]||=(...t)=>e(X)&&e(X)(...t)},null,544),f(`dialog`,{ref_key:`dialogRef`,ref:De,class:`confirm-dialog`,onClick:o[22]||=(...t)=>e(G)&&e(G)(...t)},[f(`div`,{class:`dialog-content`,onClick:o[21]||=m(()=>{},[`stop`])},[f(`h3`,xe,i(e(Te)),1),f(`p`,Se,i(e(Ee)),1),f(`div`,Ce,[e(Oe)?u(``,!0):(t(),l(`button`,{key:0,onClick:o[19]||=(...t)=>e(W)&&e(W)(...t),class:`dialog-btn dialog-btn-cancel`},`ì·¨ì†Œ`)),f(`button`,{ref_key:`confirmButtonRef`,ref:B,onClick:o[20]||=(...t)=>e(U)&&e(U)(...t),class:`dialog-btn dialog-btn-confirm`,autofocus:``},`í™•ì¸`,512)])])],512)])}}},[[`__scopeId`,`data-v-d33a30f3`]]);export{C as default};