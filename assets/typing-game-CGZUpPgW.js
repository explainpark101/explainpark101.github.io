import{C as e,M as t,N as n,O as r,S as i,b as a,c as o,d as s,g as c,j as l,k as u,m as ee,p as d,s as f,v as p,w as te,x as ne}from"./index-CDTxaWn-.js";import{t as m}from"./_plugin-vue_export-helper-9n1O4nl6.js";var h={__name:`GameItem`,props:{text:{type:String,required:!0},type:{type:String,required:!0,validator:e=>[`word`,`syntax`].includes(e)},x:{type:Number,required:!0},y:{type:Number,required:!0},zIndex:{type:Number,required:!0}},setup(r){return(i,a)=>(e(),c(`div`,{class:l([`item`,r.type]),style:t({position:`absolute`,left:`${r.x}px`,top:`${r.y}px`,zIndex:r.zIndex})},n(r.text),7))}},re=m(h,[[`__scopeId`,`data-v-536a01c1`]]),ie={class:`typing-game-container`},ae={id:`game-container`,class:`relative w-full max-w-4xl mx-auto p-4 md:p-6 flex flex-col items-center gap-4`},oe={id:`game-ui`,class:`w-full flex-col items-center gap-4 flex`},se={id:`fullscreen-open-icon`,xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},ce={id:`fullscreen-close-icon`,xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},le={class:`w-full flex justify-between items-center bg-slate-800 p-3 rounded-lg shadow-lg`},ue={class:`text-lg`},de={id:`score`,class:`font-bold text-2xl text-yellow-300`},fe={class:`text-lg`},pe={id:`typing-speed`,class:`font-bold text-1xl text-yellow-300`},me={class:`text-lg`},he={id:`lives`,class:`font-bold text-2xl text-red-500`},ge=[`disabled`],_e={id:`settings-modal`,class:`absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-20`},ve={class:`bg-slate-800 p-8 rounded-xl shadow-2xl w-full max-w-2xl text-center`},ye={class:`grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-left`},be={class:`flex flex-col sm:flex-row gap-4 justify-center mb-6`},xe={id:`game-over-modal`,class:`absolute inset-0 bg-black bg-opacity-80 flex-col items-center justify-center z-20 flex`},Se={class:`text-center`},Ce={id:`modal-score`,class:`text-2xl text-yellow-400 mb-2`},we={id:`modal-typing-speed`,class:`text-xl text-yellow-400 mb-8`},g=m({__name:`index`,setup(t){let m=u(!0),h=u(!1),g=u(!1),_=u(!1),v=u(!1),y=u(!1),b=u(`neutral`),x=u(0),S=u(5),C=u(0),w=u(!0),T=u(``),E=u(``),D=u(``),O=u(null),k=u(null),A=u(null),j=u([]),M=u(1),N=u(2500),P=u(0),F=u(null),I=u(19999),L=u(9999),R=u([]),z=u([]),B=u(0),V=u(0),H=u(!1),U=0,W=null,G=null,K=null,Te=e=>{if(typeof e!=`string`)return 0;let t=0;for(let n=0;n<e.length;n++){let r=e[n],i=r.charCodeAt(0);r===` `?t+=1:i>=44032&&i<=55203?t+=(i-44032)%28==0?2:3:t+=1}return t},q=e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},J=e=>e.split(`
`).map(e=>e.trim()).filter(e=>e),Ee=()=>{S.value>0&&S.value--},De=e=>{e>0&&(x.value+=e)},Y=e=>{let t=j.value.findIndex(t=>t.id===e);t!==-1&&j.value.splice(t,1)},Oe=()=>{w.value||(Ee(),v.value=!0,setTimeout(()=>{v.value=!1},300),S.value<=0&&Fe())},ke=()=>{x.value>0&&x.value%50==0&&(M.value+=.2),x.value>0&&x.value%100==0&&N.value>=200&&(N.value-=50,Z(),Ne())},Ae=()=>{P.value+=.1,P.value>0&&(C.value=x.value/P.value*60)},je=()=>{w.value||O.value&&j.value.forEach(e=>{let t=e.y<0?M.value*5:M.value;e.y+=t*e.speedMultiplier,e.y+40>=O.value.offsetHeight&&(Y(e.id),Oe())})},X=(e,t)=>{let n;if(e===`word`?(B.value>=R.value.length&&(B.value=0,R.value=q([...J(E.value)])),R.value.length>0&&(n=R.value[B.value],B.value++)):(V.value>=z.value.length&&(V.value=0,z.value=q([...J(D.value)])),z.value.length>0&&(n=z.value[V.value],V.value++)),!n||!O.value)return;let r=O.value.offsetWidth,i=n.length*12+24,a,o=!1,s=0;do{o=!1,a=Math.random()*(r-i);for(let e of j.value)if(e.y<40){let t=e.x,n=e.text.length*12+24;if(a<t+n&&a+i>t){o=!0;break}}s++}while(o&&s<20);let c=e===`word`?I.value--:L.value--,l={id:U++,text:n,type:e,x:a,y:-40,zIndex:c,speedMultiplier:t*(5/n.length)};j.value.push(l),F.value=l},Me=()=>{if(w.value||j.value.length>=7||F.value&&j.value.includes(F.value)&&F.value.y<10)return;let e=J(E.value),t=J(D.value),n=e.length>0,r=t.length>0;if(!(!n&&!r))if(Math.random()<.75&&n||!r){if(H.value){H.value=!1;return}X(`word`,1)}else X(`syntax`,.5),H.value=!0},Ne=()=>{W=setInterval(()=>je(),16),G=setInterval(()=>Me(),N.value),K=setInterval(()=>Ae(),100)},Z=()=>{W&&clearInterval(W),G&&clearInterval(G),K&&clearInterval(K)},Pe=()=>{let e=J(E.value),t=J(D.value);if(e.length===0&&t.length===0){alert(`Please enter at least one word or syntax phrase to start the game.`);return}Q(),x.value=0,S.value=5,M.value=1,N.value=2500,j.value=[],w.value=!1,P.value=0,F.value=null,I.value=19999,L.value=9999,R.value=q([...e]),z.value=q([...t]),B.value=0,V.value=0,H.value=!1,j.value=[],k.value&&(k.value.disabled=!1,k.value.value=``),T.value=``,b.value=`neutral`,U=0,a(()=>{k.value&&k.value.focus()}),m.value=!1,h.value=!0,g.value=!1,Z(),Ne()},Fe=()=>{w.value||(w.value=!0,Z(),k.value&&(k.value.disabled=!0),g.value=!0)},Ie=()=>{Z(),g.value=!1,h.value=!1,m.value=!0,w.value=!0},Le=()=>{if(!T.value||T.value.trim()===``){b.value=`neutral`;return}let e=T.value,t=!1;for(let n of j.value){let r=n.type===`syntax`,i,a;if(r?(i=n.text.replace(/\s/g,``),a=e.replace(/\s/g,``)):(i=n.text.trim(),a=e.trim()),i===a){t=!0;break}}b.value=t?`match`:`no-match`},Re=e=>{if(!e)return;let t=null;for(let n of j.value){let r=n.type===`syntax`,i,a;if(r?(i=n.text.replace(/\s/g,``),a=e.replace(/\s/g,``)):(i=n.text.trim(),a=e.trim()),i===a){t=n;break}}t?(De(Te(t.text)),Y(t.id),ke(),b.value=`neutral`):(y.value=!0,b.value=`no-match`,setTimeout(()=>{y.value=!1,b.value=`neutral`},200)),T.value=``},ze=e=>{!w.value&&e.key===`Enter`&&(e.preventDefault(),Re(T.value))},Q=()=>{let e={words:E.value,syntax:D.value};localStorage.setItem(`typingGameSettings`,JSON.stringify(e))},Be=()=>{let e=localStorage.getItem(`typingGameSettings`);if(e)try{let t=JSON.parse(e);E.value=typeof t.words==`string`?t.words:``,D.value=typeof t.syntax==`string`?t.syntax:``}catch(e){console.error(`Failed to parse settings from localStorage`,e),Ve()}else Ve()},Ve=()=>{E.value=[`네트워크`,`프로토콜`,`알고리즘`,`데이터베이스`,`서버`,`클라이언트`,`프레임워크`,`라이브러리`].join(`
`),D.value=[`public static void main`,`System.out.println()`,`document.getElementById`,`addEventListener('click', () => {})`].join(`
`)},He=()=>{Q();let e={words:J(E.value),syntax:J(D.value)},t=JSON.stringify(e,null,2),n=new Blob([t],{type:`application/json`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`typing_settings.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},Ue=()=>{A.value.click()},We=e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{try{let t=JSON.parse(e.target.result);Array.isArray(t.words)&&Array.isArray(t.syntax)?(E.value=t.words.join(`
`),D.value=t.syntax.join(`
`),Q()):alert(`Invalid JSON format. The file must contain "words" and "syntax" arrays.`)}catch(e){alert(`Error parsing JSON file: `+e.message)}},n.readAsText(t),e.target.value=``},Ge=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>console.error(`Fullscreen Error: ${e.message}`))},Ke=()=>{_.value=!!document.fullscreenElement},qe=()=>{if(!document.querySelector(`script[src*="tailwindcss"]`)){let e=document.createElement(`script`);e.src=`https://cdn.tailwindcss.com`,document.head.appendChild(e)}if(!document.querySelector(`link[href*="Fira+Code"]`)){let e=document.createElement(`link`);e.rel=`preconnect`,e.href=`https://fonts.googleapis.com`,document.head.appendChild(e);let t=document.createElement(`link`);t.rel=`preconnect`,t.href=`https://fonts.gstatic.com`,t.crossOrigin=`anonymous`,document.head.appendChild(t);let n=document.createElement(`link`);n.href=`https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap`,n.rel=`stylesheet`,document.head.appendChild(n)}},Je=()=>{let e={open:!1},t=new Image;Object.defineProperty(t,`id`,{get:function(){e.open=!0,e.open&&(document.documentElement.innerHTML=``,document.documentElement.style.display=`none`,setInterval(()=>{},100))}});let n=e=>{if(e.key===`F12`||e.ctrlKey&&e.shiftKey&&(e.key===`I`||e.key===`J`||e.key===`C`)||e.ctrlKey&&e.key===`U`)return e.preventDefault(),!1},r=e=>(e.preventDefault(),!1),i=e=>(e.preventDefault(),!1);document.addEventListener(`keydown`,n),document.addEventListener(`contextmenu`,r),document.addEventListener(`selectstart`,i);let a=setInterval(()=>{(window.outerHeight-window.innerHeight>200||window.outerWidth-window.innerWidth>200)&&(document.documentElement.innerHTML=``,document.documentElement.style.display=`none`)},500);return()=>{document.removeEventListener(`keydown`,n),document.removeEventListener(`contextmenu`,r),document.removeEventListener(`selectstart`,i),clearInterval(a)}},$=null;return ne(()=>{qe(),Be(),document.addEventListener(`fullscreenchange`,Ke),$=Je()}),i(()=>{Z(),document.removeEventListener(`fullscreenchange`,Ke),$&&$()}),(t,i)=>(e(),c(`div`,ie,[d(`div`,ae,[r(d(`div`,oe,[d(`button`,{id:`fullscreen-btn`,onClick:Ge,class:`absolute top-6 right-6 text-gray-400 hover:text-white transition z-30`,title:`Toggle Fullscreen`},[r((e(),c(`svg`,se,[...i[3]||=[d(`path`,{d:`M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3`},null,-1)]],512)),[[o,!_.value]]),r((e(),c(`svg`,ce,[...i[4]||=[d(`path`,{d:`M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3`},null,-1)]],512)),[[o,_.value]])]),i[9]||=d(`h1`,{class:`text-3xl md:text-4xl font-bold text-emerald-400`},`Typing Master`,-1),d(`div`,le,[d(`div`,ue,[i[5]||=p(`SCORE: `,-1),d(`span`,de,n(x.value),1)]),d(`div`,fe,[i[6]||=p(`분당타수: `,-1),d(`span`,pe,n(Math.round(C.value)),1),i[7]||=p(` 타`,-1)]),d(`div`,me,[i[8]||=p(`LIVES: `,-1),d(`span`,he,n(S.value),1)])]),d(`div`,{id:`game-screen`,ref_key:`gameScreen`,ref:O,class:l([`w-full h-[50vh] md:h-[60vh] bg-gray-900/80 border-2 border-slate-700 rounded-lg shadow-inner relative overflow-hidden`,{"flash-red":v.value}])},[(e(!0),c(s,null,te(j.value,t=>(e(),ee(re,{key:t.id,text:t.text,type:t.type,x:t.x,y:t.y,"z-index":t.zIndex},null,8,[`text`,`type`,`x`,`y`,`z-index`]))),128))],2),r(d(`input`,{type:`text`,id:`input-box`,ref_key:`inputBox`,ref:k,"onUpdate:modelValue":i[0]||=e=>T.value=e,onKeydown:ze,onInput:Le,class:l([`w-full p-4 bg-slate-900 border-2 rounded-lg text-xl text-center focus:outline-none focus:ring-2 transition`,{"border-emerald-500 focus:ring-emerald-400":b.value===`neutral`,"border-green-500 focus:ring-green-400 bg-green-900/20":b.value===`match`,"border-red-500 focus:ring-red-400 bg-red-900/20":b.value===`no-match`||y.value}]),placeholder:`Type here and press Enter...`,disabled:w.value},null,42,ge),[[f,T.value]])],512),[[o,h.value]]),r(d(`div`,_e,[d(`div`,ve,[i[12]||=d(`h2`,{class:`text-4xl font-extrabold text-white mb-6`},`Game Settings`,-1),d(`div`,ye,[d(`div`,null,[i[10]||=d(`label`,{for:`custom-words`,class:`block mb-2 font-bold text-emerald-400`},`키워드 (한 줄에 하나씩)`,-1),r(d(`textarea`,{id:`custom-words`,"onUpdate:modelValue":i[1]||=e=>E.value=e,rows:`8`,class:`w-full focus:outline-none focus:ring-2 focus:ring-emerald-400`},null,512),[[f,E.value]])]),d(`div`,null,[i[11]||=d(`label`,{for:`custom-syntax`,class:`block mb-2 font-bold text-purple-400`},`구문 (한 줄에 하나씩)`,-1),r(d(`textarea`,{id:`custom-syntax`,"onUpdate:modelValue":i[2]||=e=>D.value=e,rows:`8`,class:`w-full focus:outline-none focus:ring-2 focus:ring-purple-400`},null,512),[[f,D.value]])])]),d(`div`,be,[d(`button`,{onClick:Ue,class:`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition transform hover:scale-105`},` Import JSON `),d(`input`,{ref_key:`importFileInput`,ref:A,type:`file`,id:`import-file`,class:`hidden`,accept:`.json`,onChange:We},null,544),d(`button`,{onClick:He,class:`bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg transition transform hover:scale-105`},` Export JSON `)]),d(`button`,{onClick:Pe,class:`w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-2xl py-4 px-10 rounded-lg transition transform hover:scale-105`},` Start Game `)])],512),[[o,m.value]]),r(d(`div`,xe,[d(`div`,Se,[i[13]||=d(`h2`,{class:`text-5xl font-extrabold text-white mb-4`},`Game Over`,-1),d(`p`,Ce,`Final Score: `+n(x.value),1),d(`p`,we,`분당타수: `+n(Math.round(C.value))+` 타`,1),d(`button`,{onClick:Ie,class:`bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-2xl py-4 px-10 rounded-lg transition transform hover:scale-105`},` Back to Settings `)])],512),[[o,g.value]])])]))}},[[`__scopeId`,`data-v-f61fa268`]]);export{g as default};