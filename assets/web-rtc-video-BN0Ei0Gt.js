import{A as e,C as t,D as n,M as r,O as i,S as a,T as o,_ as s,b as ee,c as te,d as c,f as l,h as u,k as d,l as f,m as p,o as ne,r as re,u as m,x as ie,y as ae}from"./index-D0aBWOAh.js";import{t as oe}from"./_plugin-vue_export-helper-9n1O4nl6.js";var se={class:`main-container`},ce={key:0},le={key:1},ue={key:2,id:`qrcode-container`,class:`qrcode-container`},de=[`href`],fe={key:4,class:`room-id-display`},pe={class:`status-container`},me={id:`status-text`},he={key:5,class:`witty-message`},ge={class:`video-main`},_e={class:`video-header`},ve={class:`video-header-title`},ye={class:`video-header-actions`},be=[`title`],xe={key:0,class:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},Se={key:1,class:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},Ce={class:`video-container`},we={class:`remote-video-wrapper`},Te={key:0,class:`video-placeholder`},Ee={class:`local-video-wrapper`},De={key:0,class:`screen-share-badge`},Oe={key:0,class:`audio-indicator`},ke={key:1,class:`camera-indicator`},Ae={key:1,class:`video-placeholder-small`},je={class:`sidebar-section`},Me={key:0,class:`message-name`},Ne={class:`text-xs text-gray-400`},Pe={class:`message-text`},Fe={class:`message-time`},Ie={class:`sidebar-section`},Le={id:`qrcode-chat-container`,class:`qrcode-chat-container`},Re=[`href`],ze={class:`sidebar-section`},Be={id:`guest-list`,class:`guest-list`},Ve={class:`guest-item host`},He={class:`text-xs text-gray-400`},Ue={key:0},We={key:1},Ge={class:`text-xs text-gray-400`},Ke={key:0},qe={class:`modal-content`},Je={class:`modal-actions`},Ye={class:`modal-content`},Xe={class:`screen-share-options`},Ze={class:`option-checkbox`},Qe={class:`option-checkbox`},$e={class:`modal-content audio-volume-modal-content`},et={key:0,class:`audio-tracks-list`},tt={class:`audio-track-label`},nt={class:`track-name`},rt={class:`track-volume`},it=[`value`,`onInput`],at={key:1,class:`no-audio-tracks`},h=oe({__name:`index`,setup(oe){let h=i(`home`),ot=i(``),g=i(``),_=i(!1),v=i(null),y=i(null),b=i(null),x=i(null),S=i(``),st=i(``),ct=i(!1),lt=i(``),ut=i(``),dt=i(!1),C=i(null),w=i(!0),T=i(null),ft=i(null),E=i(null),D=i(null),O=i(null),k=i(null),A=i(null),j=i(null),M=i(!1),N=i(null),P=i(null),F=i([]),pt=i(!1),I=i({includeAudio:!1,keepCamera:!1}),mt=i(!1),L=new Map,R=i(null),z=null,B=new Map,V=new Map,H=new Map,U=i(null),W=null,G=i(null),ht=i(null),K=i([]),q=null,J=null,Y=null,X=`ì˜ì—­ ì „ê°œ ì¤‘...(ì£¼ìˆ ì „ë¬¸ê³  í•™ìƒë“¤ì˜ ì‘ì›ì„ ë°›ëŠ” ì¤‘...(ì´íƒ€ë„ë¦¬ ìœ ì§€ê°€ ì£¼ë¬¼ì„ ì‚¼í‚¤ëŠ” ì¤‘...(ì˜·ì½”ì¸  ìœ íƒ€ê°€ ë¦¬ì¹´ì˜ ì €ì£¼ë¥¼ í‘¸ëŠ” ì¤‘...(ì „ì§‘ì¤‘ í˜¸í¡ ìµíˆëŠ” ì¤‘...(ë¹ˆí‹ˆì˜ ì‹¤ì„ ì°¾ëŠ” ì¤‘...(é›·ì˜ å‘¼å¸, å£±ãƒå‹, éœ¹é‚ä¸€é–ƒ!(ë”ìš± ë” ê·¸ ë„˜ì–´ë¡œ! Plus Ultra!(ê³ ë¬´ê³ ë¬´! ë¹ ë¥´ê²Œ ê¸°ë‹¤ë¦¬ê¸°!(ì œí•˜í•˜í•˜!!! ì´ ë¡œë”© ì†ë„ëŠ” ë­ëƒ!!!(ì¡°ë¡œê°€ ë¹ ë¥´ê²Œ ê¸¸ì„ ì°¾ê³  ìˆëŠ” ì¤‘...(ìˆ˜ë‘”! ê¸°ë‹¤ë¦¬ê¸°ì˜ ìˆ !(ì¸í„°ë„·ì´ ì—†ëŠ” ê³³ì—ì„œ ì´ ì •ë„ì˜ ë°ì´í„°ëŸ‰ì´ë¼ë‹ˆ í¬í‘!!(ì±„íŒ…ì›Œë“œ...ì˜¤...ë¹ ...(íƒ€ì½”í”¼ê°€ ë‹¹ì‹ ì„ í•´í”¼í•˜ê²Œ ë§Œë“¤ ë°©ë²•ì„ ê³ ë¯¼í•˜ëŠ” ì¤‘...(ì‹œì¦ˆì¹´ì˜ ë¯¸ì†Œë¥¼ ë³´ê¸° ìœ„í•´, ì‚¬ì§„ì„ ì°ëŠ” ì¤‘...(íƒ€ì½”í”¼ê°€ ì¹œêµ¬ì™€ í™”í•´í•˜ê¸°ë¥¼ ë°”ë¼ë©° ë¦¬ë³¸ì„ ì°¾ëŠ” ì¤‘...(ì•„ë§ˆë¯¸ì•¼ ì†Œë¼ê°€ ì‰ì—¬ì—¬ì‹  ì—°ê¸°ë¥¼ ì¤€ë¹„í•˜ëŠ” ì¤‘...(ì´ì¹˜íˆë©”ê°€ í™”ë£Œ ì§ì „ ë”°ë´‰ì„ ì¤€ë¹„í•˜ëŠ” ì¤‘...(ë„ëŒ€ì²´ ì–¸ì œë¶€í„° ì„œë²„ê°€ í„°ì¡Œë‹¤ê³  ìƒê°í•œ ê±°ì§€?(íŠ¸ë˜í”½ì„, íŠ¸ë˜í”½ì„ ë†’ì´ì§€ ë§ˆë¼(ë” ê³µì—°ì„ ì¶•í•˜í•˜ê¸° ìœ„í•´ í˜„ê´€ ì•ì—ì„œ ê½ƒ ë“¤ê³  ëŒ€ê¸° ì¤‘...(ë¦¬ì¹˜ ì¼ë°œ ë„ë¼3 ë’·ë„ë¼ 3 í˜¼ì¼ìƒ‰ ì‚°ì•ˆì»¤ << ì§„ì§œ ì‚¬ê¸°ì¹˜ë„¤ ã…‹ã…‹(ì™œ ë§ˆì‘ë¶€ì¥ì´ ë‹¤ìŒ ì‹¬í™” ê°•ì˜ë¥¼ ì°ëŠ” ì¤‘...(íšŒì¥ì´ ì¢…ì‹  ì„ ì–¸ë¬¸ì„ ì‘ì„±í•˜ëŠ” ì¤‘...(ëŒ€í•™ì›ìƒì´ ì—°êµ¬ì‹¤ì—ì„œ ë¹¨ë¦¬ ë‚˜ê°€ê¸°ë¥¼ ë°”ë¼ë©° ëŒ€ê¸° ì¤‘...`.split(`(`),gt=c(()=>Array.from(V.entries()).map(([e,{name:t,shortId:n}])=>({id:e,name:t,shortId:n}))),_t=c(()=>[...K.value].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))),vt=c(()=>_.value?`${y.value}ë‹˜ì˜ í™”ìƒí†µí™”`:G.value?`${G.value}ë‹˜ì˜ í™”ìƒí†µí™”`:`í˜¸ìŠ¤íŠ¸ ì •ë³´ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...`),yt=c(()=>_.value?U.value:U.value||(x.value?`${window.location.origin}${window.location.pathname}#${x.value}`:``)),bt=i(new Map),xt=c(()=>{if(!A.value)return[];let e=[];return A.value.getAudioTracks().forEach(t=>{let n=`ì˜¤ë””ì˜¤ íŠ¸ë™`;n=F.value.some(e=>e.id===t.id)?`í™”ë©´ ê³µìœ  ì˜¤ë””ì˜¤`:`ì›¹ìº  ë§ˆì´í¬`,bt.value.has(t.id)||bt.value.set(t.id,1);let r=bt.value.get(t.id);e.push({track:t,label:n,volume:r})}),e});function St(e){return e.slice(-6)}function Ct(){q&&clearInterval(q);let e=``,t=()=>{let t=``;if(X.length>1)do t=X[Math.floor(Math.random()*X.length)];while(t===e);else X.length===1&&(t=X[0]);st.value=t,e=t};t(),q=setInterval(t,2e3)}function Z(e){q&&=(clearInterval(q),null),h.value=e,ae(()=>{if(e===`home`){let e=document.getElementById(`username-input`);e&&e.focus()}else if(e===`video`){let e=document.getElementById(`message-input`);e&&e.focus(),window.innerWidth>768?w.value=!1:w.value=!0}})}function Q(e,t,n=null){lt.value=e,ut.value=t,dt.value=!!n,C.value=n,ct.value=!0}function wt(){ct.value=!1,C.value=null}function Tt(){C.value&&C.value(),wt()}function Et(){I.value={includeAudio:!1,keepCamera:!1},pt.value=!0}function Dt(){pt.value=!1}function Ot(){Dt(),zt(I.value)}function kt(){R.value||=new(window.AudioContext||window.webkitAudioContext),A.value&&A.value.getAudioTracks().forEach(e=>{L.has(e.id)||jt(e)}),mt.value=!0}function At(){mt.value=!1}function jt(e){R.value||=new(window.AudioContext||window.webkitAudioContext);try{let t=R.value.createMediaStreamSource(new MediaStream([e])),n=R.value.createGain();n.gain.value=1,t.connect(n),n.connect(R.value.destination),L.set(e.id,n)}catch(e){console.error(`ì˜¤ë””ì˜¤ íŠ¸ë™ GainNode ì„¤ì • ì‹¤íŒ¨:`,e)}}function Mt(e,t){bt.value.set(e.id,t);let n=L.get(e.id);if(n)n.gain.value=t;else{jt(e);let n=L.get(e.id);n&&(n.gain.value=t)}}function Nt(e){return new Date(e).toLocaleTimeString(`ko-KR`,{hour:`2-digit`,minute:`2-digit`})}function Pt(e,t=null){for(let[n,r]of B)if(n!==t)try{r.send(e)}catch(e){console.error(`Peer ${n}ë¡œ ì „ì†¡ ì‹¤íŒ¨:`,e)}}function Ft(){let e=Array.from(V.entries()).map(([e,{name:t,shortId:n}])=>({id:e,name:t,shortId:n})),t={type:`participantUpdate`,payload:{hostName:y.value,hostShortId:b.value,guests:e}};Pt(t)}function It(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){let e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!e)return{supported:!1,error:`ì´ ë¸Œë¼ìš°ì €ëŠ” ë¯¸ë””ì–´ ë””ë°”ì´ìŠ¤ APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`};navigator.mediaDevices={getUserMedia:t=>new Promise((n,r)=>{e.call(navigator,t,n,r)})}}return{supported:!0}}async function Lt(){try{let e=It();if(!e.supported)return Q(`ë¯¸ë””ì–´ ì ‘ê·¼ ì‹¤íŒ¨`,e.error||`ì´ ë¸Œë¼ìš°ì €ëŠ” ì¹´ë©”ë¼/ë§ˆì´í¬ ì ‘ê·¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`),null;let t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30},facingMode:`user`},audio:{sampleRate:48e3,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});return A.value=t,O.value&&(O.value.srcObject=t),t}catch(e){return console.error(`ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`,e),Q(`ë¯¸ë””ì–´ ì ‘ê·¼ ì‹¤íŒ¨`,`ì¹´ë©”ë¼/ë§ˆì´í¬ ì ‘ê·¼ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${e.message}`),null}}function Rt(){A.value&&=(A.value.getTracks().forEach(e=>e.stop()),null),j.value&&=(j.value.getTracks().forEach(e=>e.stop()),null),N.value&&=(N.value.getTracks().forEach(e=>e.stop()),null),O.value&&(O.value.srcObject=null),k.value&&(k.value.srcObject=null),M.value=!1}async function zt(e={includeAudio:!1,keepCamera:!1}){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia){Q(`í™”ë©´ ê³µìœ  ì‹¤íŒ¨`,`ì´ ë¸Œë¼ìš°ì €ëŠ” í™”ë©´ ê³µìœ ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìµœì‹  ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.`);return}let t=await navigator.mediaDevices.getDisplayMedia({video:{cursor:`always`},audio:e.includeAudio||!1});if(N.value=t,M.value=!0,F.value=[],e.includeAudio&&t.getAudioTracks().length>0&&t.getAudioTracks().forEach(e=>{F.value.push(e)}),!A.value)A.value=t,O.value&&(O.value.srcObject=t);else{let n=t.getVideoTracks()[0],r=A.value.getVideoTracks()[0];e.keepCamera&&r?(P.value=r,A.value.removeTrack(r),A.value.addTrack(n)):(r&&(A.value.removeTrack(r),r.stop()),A.value.addTrack(n)),e.includeAudio&&F.value.length>0&&F.value.forEach(e=>{A.value.getAudioTracks().find(t=>t.id===e.id)||A.value.addTrack(e)}),O.value&&(O.value.srcObject=A.value)}if(A.value){let t=A.value.getVideoTracks()[0];for(let[n,r]of H)try{let n=r?.peerConnection||r?._pc;if(n){let r=n.getSenders().find(e=>e.track&&e.track.kind===`video`);r&&await r.replaceTrack(t),e.includeAudio&&F.value.length>0&&F.value.forEach(e=>{n.getSenders().find(t=>t.track&&t.track.id===e.id)||n.addTrack(e,A.value)})}}catch(e){console.error(`í”¼ì–´ ${n}ì—ê²Œ íŠ¸ë™ êµì²´ ì‹¤íŒ¨:`,e)}}t.getVideoTracks()[0].onended=()=>{Bt()}}catch(e){console.error(`í™”ë©´ ê³µìœ  ì‹¤íŒ¨:`,e),e.name===`NotAllowedError`||e.name===`PermissionDeniedError`?Q(`í™”ë©´ ê³µìœ  ê¶Œí•œ ê±°ë¶€`,`í™”ë©´ ê³µìœ  ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.`):e.name===`NotFoundError`?Q(`í™”ë©´ ê³µìœ  ì‹¤íŒ¨`,`ê³µìœ í•  ìˆ˜ ìˆëŠ” í™”ë©´ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`):Q(`í™”ë©´ ê³µìœ  ì‹¤íŒ¨`,`í™”ë©´ ê³µìœ  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${e.message}`),M.value=!1,F.value=[]}}async function Bt(){if(M.value)try{if(!A.value){M.value=!1;return}let e=A.value.getVideoTracks().find(e=>N.value&&N.value.getVideoTracks().some(t=>t.id===e.id));e&&(A.value.removeTrack(e),e.stop());let t=[...F.value];if(t.length>0&&t.forEach(e=>{let t=A.value.getAudioTracks().find(t=>t.id===e.id);t&&A.value.removeTrack(t),e.stop()}),N.value&&=(N.value.getTracks().forEach(e=>{e.readyState!==`ended`&&e.stop()}),null),P.value&&P.value.readyState!==`ended`){let e=A.value.getVideoTracks()[0];e?e.id!==P.value.id&&(A.value.removeTrack(e),e.stop(),A.value.addTrack(P.value)):A.value.addTrack(P.value),P.value=null}else await Vt();for(let[e,n]of H)try{let e=n?.peerConnection||n?._pc;if(e){t.length>0&&e.getSenders().forEach(n=>{n.track&&t.some(e=>e.id===n.track.id)&&e.removeTrack(n)});let n=A.value.getVideoTracks()[0];if(n){let t=e.getSenders().find(e=>e.track&&e.track.kind===`video`);t&&await t.replaceTrack(n)}}}catch(t){console.error(`í”¼ì–´ ${e}ì—ê²Œ íŠ¸ë™ ì œê±° ì‹¤íŒ¨:`,t)}O.value&&(O.value.srcObject=A.value),F.value=[],M.value=!1}catch(e){console.error(`í™”ë©´ ê³µìœ  ì¤‘ì§€ ì‹¤íŒ¨:`,e),Q(`ì˜¤ë¥˜`,`í™”ë©´ ê³µìœ ë¥¼ ì¤‘ì§€í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`),M.value=!1}}async function Vt(){try{let e=It();if(!e.supported){Q(`ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨`,e.error||`ì´ ë¸Œë¼ìš°ì €ëŠ” ì¹´ë©”ë¼ ì ‘ê·¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`);return}let t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30},facingMode:`user`},audio:{sampleRate:48e3,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});if(A.value){let e=t.getVideoTracks()[0],n=A.value.getVideoTracks().find(e=>e.kind===`video`);n&&(A.value.removeTrack(n),n.stop()),A.value.addTrack(e)}else A.value=t;if(O.value&&(O.value.srcObject=A.value),t.getAudioTracks().length>0&&A.value){let e=t.getAudioTracks()[0],n=A.value.getAudioTracks()[0];n&&(A.value.removeTrack(n),n.stop()),A.value.addTrack(e)}for(let[e,t]of H)try{let e=t?.peerConnection||t?._pc;if(e&&A.value){let t=A.value.getVideoTracks()[0];if(t){let n=e.getSenders().find(e=>e.track&&e.track.kind===`video`);n&&await n.replaceTrack(t)}let n=A.value.getAudioTracks()[0];if(n){let t=e.getSenders().find(e=>e.track&&e.track.kind===`audio`);t?await t.replaceTrack(n):e.addTrack(n,A.value)}}}catch(t){console.error(`í”¼ì–´ ${e}ì—ê²Œ íŠ¸ë™ êµì²´ ì‹¤íŒ¨:`,t)}}catch(e){console.error(`ì¹´ë©”ë¼ ì „í™˜ ì‹¤íŒ¨:`,e),Q(`ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨`,`ì¹´ë©”ë¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${e.message}`)}}function Ht(e,t){if(!(!e||!e.type))if(_.value)switch(e.type){case`name`:V.set(t,{name:e.payload.name,shortId:e.payload.shortId}),B.get(t).send({type:`name`,payload:{name:y.value,shortId:b.value},id:v.value}),B.get(t).send({type:`roomInfo`,payload:{roomUrl:U.value}}),Ft();break;case`chat`:let n=V.get(t)||{name:`ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì`,shortId:`??????`},r={text:e.payload,displayName:n.name,shortId:n.shortId,timestamp:e.timestamp,type:`chat`,senderId:t};K.value.push(r),Pt({type:`chat`,payload:e.payload,timestamp:e.timestamp,sender:{id:t,name:n.name,shortId:n.shortId}},t);break}else switch(e.type){case`name`:G.value=e.payload.name,ht.value=e.payload.shortId;break;case`roomInfo`:U.value=e.payload.roomUrl,D.value&&window.QRCode&&(Y&&=(Y.clear(),null),D.value.innerHTML=``,Y=new window.QRCode(D.value,{text:e.payload.roomUrl,width:160,height:160}));break;case`participantUpdate`:G.value=e.payload.hostName,ht.value=e.payload.hostShortId;break;case`chat`:K.value.push({text:e.payload,displayName:e.sender.name,shortId:e.sender.shortId,timestamp:e.timestamp,type:`chat`,senderId:e.sender.id});break}}function Ut(e){e.on(`open`,()=>{if(console.log(`ë°ì´í„° ì±„ë„ ì—´ë¦¼: ${e.peer}`),_.value){if(A.value){let t=z.call(e.peer,A.value);t&&(H.set(e.peer,t),$(t,e.peer))}Z(`video`)}else{W=e;let t={type:`name`,payload:{name:y.value,shortId:b.value},id:v.value};if(W.send(t),A.value){let e=z.call(x.value,A.value);e&&(H.set(x.value,e),$(e,x.value))}Z(`video`)}}),e.on(`data`,t=>{Ht(t,e.peer)}),e.on(`close`,()=>{if(console.log(`ì—°ê²° ì¢…ë£Œ: ${e.peer}`),_.value){let t=e.peer;B.delete(t),V.delete(t);let n=H.get(t);n&&(n.close(),H.delete(t)),Ft()}else{e.kicked||Q(`í˜¸ìŠ¤íŠ¸ ì—°ê²° ëŠê¹€`,`í˜¸ìŠ¤íŠ¸ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.`),W=null;let t=H.get(x.value);t&&(t.close(),H.delete(x.value))}}),e.on(`error`,t=>{console.error(`ì—°ê²° ì—ëŸ¬:`,t),_.value?Q(`ê²ŒìŠ¤íŠ¸ ì—°ê²° ì˜¤ë¥˜`,`${e.peer}ì™€ ì—°ê²° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${t.message}`):Q(`ì—°ê²° ì˜¤ë¥˜`,`ì˜¤ë¥˜ ë°œìƒ: ${t.message}`)})}function $(e,t){e.on(`stream`,e=>{console.log(`ì›ê²© ìŠ¤íŠ¸ë¦¼ ìˆ˜ì‹ :`,t),j.value=e,k.value&&(k.value.srcObject=e)}),e.on(`close`,()=>{console.log(`ë¯¸ë””ì–´ í˜¸ì¶œ ì¢…ë£Œ:`,t),j.value&&=(j.value.getTracks().forEach(e=>e.stop()),null),k.value&&(k.value.srcObject=null),H.delete(t)}),e.on(`error`,e=>{console.error(`ë¯¸ë””ì–´ í˜¸ì¶œ ì—ëŸ¬:`,e),Q(`ë¯¸ë””ì–´ ì—°ê²° ì˜¤ë¥˜`,`ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ êµí™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${e.message}`)})}function Wt(){Z(`waiting`),Ct(),S.value=`Peer ì„œë²„ì— ì—°ê²° ì¤‘...`,z=new window.Peer(null,{debug:2,host:`peerjs.jaehyung101.synology.me`,secure:!0,proxied:!0}),z.on(`open`,async e=>{v.value=e,b.value||(b.value=St(v.value),sessionStorage.setItem(`webrtc-shortId`,b.value)),console.log(`ë‚´ Peer ID (í˜¸ìŠ¤íŠ¸): ${v.value} (#${b.value})`);let t=`${window.location.origin}${window.location.pathname}#${v.value}`;if(U.value=t,S.value=`ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ ì¤€ë¹„ ì¤‘...`,!await Lt()){Z(`home`);return}S.value=`ìƒëŒ€ë°©ì˜ ì—°ê²°ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...`,E.value&&window.QRCode&&(J&&=(J.clear(),null),E.value.innerHTML=``,J=new window.QRCode(E.value,{text:t,width:256,height:256})),D.value&&window.QRCode&&(Y&&=(Y.clear(),null),D.value.innerHTML=``,Y=new window.QRCode(D.value,{text:t,width:160,height:160}))}),z.on(`connection`,e=>{console.log(`ìƒˆ ì—°ê²° ì‹œë„: ${e.peer}`),B.set(e.peer,e),Ut(e)}),z.on(`call`,e=>{console.log(`ë¯¸ë””ì–´ í˜¸ì¶œ ìˆ˜ì‹ :`,e.peer),A.value&&(e.answer(A.value),H.set(e.peer,e),$(e,e.peer))}),z.on(`error`,e=>{console.error(`Peer ì—ëŸ¬:`,e),Q(`ì—°ê²° ì‹¤íŒ¨`,`Peer ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${e.message}`),Rt(),Z(`home`)})}function Gt(e){Z(`waiting`),Ct(),S.value=`í˜¸ìŠ¤íŠ¸ì— ì—°ê²° ì¤‘...`,z=new window.Peer(null,{debug:3,host:`peerjs.jaehyung101.synology.me`,secure:!0,proxied:!0}),z.on(`open`,async t=>{if(v.value=t,b.value||(b.value=St(v.value),sessionStorage.setItem(`webrtc-shortId`,b.value)),console.log(`ë‚´ Peer ID (ê²ŒìŠ¤íŠ¸): ${t} (#${b.value})`),S.value=`ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ ì¤€ë¹„ ì¤‘...`,!await Lt()){Z(`home`);return}S.value=`í˜¸ìŠ¤íŠ¸ì— ì—°ê²° ì¤‘...`;let n=z.connect(e,{reliable:!0});if(!n){console.error(`í˜¸ìŠ¤íŠ¸ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`),Q(`ì—°ê²° ì‹¤íŒ¨`,`í˜¸ìŠ¤íŠ¸ì— ì—°ê²°ì„ ì‹œë„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`),Rt(),Z(`home`);return}Ut(n)}),z.on(`call`,e=>{console.log(`ë¯¸ë””ì–´ í˜¸ì¶œ ìˆ˜ì‹ :`,e.peer),A.value&&(e.answer(A.value),H.set(e.peer,e),$(e,e.peer))}),z.on(`error`,e=>{console.error(`Peer ì—ëŸ¬:`,e);let t=`Peer ì˜¤ë¥˜: ${e.message}`;e.type===`peer-unavailable`&&(t=`í•´ë‹¹ ë£¸ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ í˜¸ìŠ¤íŠ¸ê°€ ì˜¤í”„ë¼ì¸ì…ë‹ˆë‹¤.`),Q(`ì—°ê²° ì‹¤íŒ¨`,t),Rt(),window.location.hash=``,Z(`home`)})}function Kt(){let e=ot.value.trim();if(!e){Q(`ì´ë¦„ í•„ìš”`,`í™”ìƒí†µí™”ì—ì„œ ì‚¬ìš©í•  ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.`);return}y.value=e,_.value?Wt():Gt(x.value)}function qt(){let e=g.value.trim();if(!e)return;let t=new Date().toISOString(),n={text:e,displayName:y.value,shortId:b.value,timestamp:t,type:`chat`,senderId:v.value};K.value.push(n),g.value=``;let r={type:`chat`,payload:e,timestamp:t,sender:{id:v.value,name:y.value,shortId:b.value}};_.value?Pt(r):W&&W.open&&W.send(r)}function Jt(){w.value=!w.value}function Yt(e){return e.preventDefault(),e.returnValue=`ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?`,`ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?`}function Xt(e){return new Promise((t,n)=>{if(document.querySelector(`script[src="${e}"]`)){t();return}let r=document.createElement(`script`);r.src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)})}function Zt(){document.title=`ezlive`,document.querySelectorAll(`meta[name="description"], meta[name="keywords"], meta[property^="og:"], meta[name^="twitter:"], meta[name="theme-color"], meta[name="apple-mobile-web-app-title"]`).forEach(e=>e.remove());let e=[{name:`description`,content:`ì„œë²„ ì—†ì´ QR ì½”ë“œë¡œ ì—°ê²°í•˜ëŠ” P2P í™”ìƒí†µí™” ì•±. ezliveë¡œ ì‰½ê³  ë¹ ë¥´ê²Œ í™”ìƒí†µí™”ë¥¼ ì‹œì‘í•˜ì„¸ìš”.`},{name:`keywords`,content:`í™”ìƒí†µí™”, WebRTC, P2P, QRì½”ë“œ, ë¹„ë””ì˜¤ì±„íŒ…, í™”ìƒíšŒì˜, ezlive`},{name:`theme-color`,content:`#111827`},{name:`apple-mobile-web-app-title`,content:`ezlive`},{name:`apple-mobile-web-app-capable`,content:`yes`},{name:`apple-mobile-web-app-status-bar-style`,content:`black-translucent`},{name:`viewport`,content:`width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no`}],t=[{property:`og:title`,content:`ezlive - P2P í™”ìƒí†µí™”`},{property:`og:description`,content:`ì„œë²„ ì—†ì´ QR ì½”ë“œë¡œ ì—°ê²°í•˜ëŠ” P2P í™”ìƒí†µí™” ì•±`},{property:`og:type`,content:`website`},{property:`og:url`,content:window.location.href},{property:`og:site_name`,content:`ezlive`}],n=[{name:`twitter:card`,content:`summary_large_image`},{name:`twitter:title`,content:`ezlive - P2P í™”ìƒí†µí™”`},{name:`twitter:description`,content:`ì„œë²„ ì—†ì´ QR ì½”ë“œë¡œ ì—°ê²°í•˜ëŠ” P2P í™”ìƒí†µí™” ì•±`}],r=e=>{let t=document.createElement(`meta`);Object.keys(e).forEach(n=>{n===`property`?t.setAttribute(`property`,e[n]):t.setAttribute(n,e[n])}),document.head.appendChild(t)};[...e,...t,...n].forEach(e=>r(e))}return o(K,()=>{ae(()=>{T.value&&(T.value.scrollTop=T.value.scrollHeight)})}),ee(async()=>{Zt();try{await Promise.all([Xt(`https://cdn.tailwindcss.com`),Xt(`https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js`),Xt(`https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js`)])}catch(e){console.error(`ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨:`,e),Q(`ë¡œë“œ ì˜¤ë¥˜`,`í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`)}b.value=sessionStorage.getItem(`webrtc-shortId`),window.location.hash?(x.value=window.location.hash.substring(1),_.value=!1):_.value=!0,Z(`home`)}),ie(()=>{q&&clearInterval(q),Rt(),z&&z.destroy(),J&&=(J.clear(),null),Y&&=(Y.clear(),null)}),(i,o)=>(a(),u(`div`,{class:`webrtc-video-app`,onBeforeunload:Yt},[l(`div`,se,[l(`div`,{id:`home-view`,class:e([`home-view`,{hidden:h.value!==`home`}])},[l(`h1`,null,[o[5]||=s(`EZ WebRTC í™”ìƒ ì†”ë£¨ì…˜ `,-1),_.value?(a(),u(m,{key:0},[s(` (êµì‚¬ìš©) `)],64)):(a(),u(m,{key:1},[s(` (í•™ìƒìš©) `)],64))]),o[6]||=l(`p`,null,`ì„œë²„ ì—†ì´ QR ì½”ë“œë¡œ ì—°ê²°í•˜ëŠ” P2P í™”ìƒí†µí™”`,-1),n(l(`input`,{id:`username-input`,"onUpdate:modelValue":o[0]||=e=>ot.value=e,type:`text`,placeholder:`ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”...`,onKeydown:te(Kt,[`enter`]),autocomplete:`off`,autocapitalize:`off`},null,544),[[ne,ot.value]]),l(`button`,{id:`start-btn`,onClick:Kt},r(_.value?`ìƒˆ í™”ìƒí†µí™” ë§Œë“¤ê¸°`:`í™”ìƒí†µí™” ì°¸ì—¬í•˜ê¸°`),1)],2),l(`div`,{id:`waiting-view`,class:e([`waiting-view`,{hidden:h.value!==`waiting`}])},[_.value?(a(),u(`h2`,ce,`í™”ìƒí†µí™”ë°© ìƒì„±ë¨`)):p(``,!0),_.value?(a(),u(`p`,le,`ì•„ë˜ QR ì½”ë“œë¥¼ ìƒëŒ€ë°©ì´ ìŠ¤ìº”í•˜ê²Œ í•˜ì„¸ìš”.`)):p(``,!0),_.value?(a(),u(`div`,ue,[l(`div`,{id:`qrcode`,ref_key:`qrcodeContainer`,ref:E},null,512)])):p(``,!0),_.value&&d(U)?(a(),u(`a`,{key:3,href:d(U),target:`_blank`,class:`room-link`},r(d(U)),9,de)):p(``,!0),_.value&&v.value?(a(),u(`div`,fe,` ë‚´ ë£¸ ID: `+r(v.value),1)):p(``,!0),l(`div`,pe,[o[7]||=l(`svg`,{class:`spinner`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[l(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),l(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1),l(`span`,me,r(S.value),1)]),st.value?(a(),u(`p`,he,r(st.value),1)):p(``,!0)],2),l(`div`,{id:`video-view`,class:e([`video-view`,{hidden:h.value!==`video`}])},[l(`div`,ge,[l(`header`,_e,[l(`span`,ve,r(vt.value),1),l(`div`,ye,[l(`button`,{id:`audio-volume-btn`,class:`audio-volume-btn`,onClick:kt,title:`ì˜¤ë””ì˜¤ ë³¼ë¥¨ ì¡°ì ˆ`},[...o[8]||=[l(`svg`,{class:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z`})],-1)]]),l(`button`,{id:`screen-share-btn`,class:`screen-share-btn`,onClick:o[1]||=e=>M.value?Bt():Et(),title:M.value?`ì¹´ë©”ë¼ë¡œ ì „í™˜`:`í™”ë©´ ê³µìœ `},[M.value?(a(),u(`svg`,Se,[...o[10]||=[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z`},null,-1)]])):(a(),u(`svg`,xe,[...o[9]||=[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z`},null,-1)]]))],8,be),l(`button`,{id:`options-btn`,class:`options-btn md:hidden`,onClick:Jt},[...o[11]||=[l(`svg`,{class:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z`})],-1)]])])]),l(`div`,Ce,[l(`div`,we,[l(`video`,{ref_key:`remoteVideo`,ref:k,autoplay:``,playsinline:``,class:e([`remote-video`,{hidden:!j.value}])},null,2),j.value?p(``,!0):(a(),u(`div`,Te,[...o[12]||=[l(`svg`,{class:`w-24 h-24 text-gray-500`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z`})],-1),l(`p`,{class:`text-gray-400 mt-4`},`ìƒëŒ€ë°© ì—°ê²° ëŒ€ê¸° ì¤‘...`,-1)]]))]),l(`div`,Ee,[l(`video`,{ref_key:`localVideo`,ref:O,autoplay:``,playsinline:``,muted:``,class:e([`local-video`,{hidden:!A.value}])},null,2),M.value?(a(),u(`div`,De,[o[13]||=l(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z`})],-1),o[14]||=l(`span`,null,`í™”ë©´ ê³µìœ  ì¤‘`,-1),F.value.length>0?(a(),u(`span`,Oe,`ğŸ”Š`)):p(``,!0),P.value?(a(),u(`span`,ke,`ğŸ“¹`)):p(``,!0)])):p(``,!0),A.value?p(``,!0):(a(),u(`div`,Ae,[...o[15]||=[l(`svg`,{class:`w-8 h-8 text-gray-500`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z`})],-1)]]))])]),l(`form`,{onSubmit:f(qt,[`prevent`]),class:`chat-form`},[n(l(`input`,{id:`message-input`,"onUpdate:modelValue":o[2]||=e=>g.value=e,type:`text`,placeholder:`ë©”ì‹œì§€ ì…ë ¥...`,autocomplete:`off`},null,512),[[ne,g.value]]),o[16]||=l(`button`,{type:`submit`},[l(`svg`,{class:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 19l9 2-9-18-9 18 9-2zm0 0v-8`})])],-1)],32)]),l(`div`,{id:`sidebar`,ref_key:`sidebar`,ref:ft,class:e([`sidebar`,{hidden:w.value}])},[l(`div`,je,[o[17]||=l(`h3`,null,`ì±„íŒ…`,-1),l(`div`,{id:`messages`,ref_key:`messagesContainer`,ref:T,class:`messages`},[(a(!0),u(m,null,t(_t.value,(t,n)=>(a(),u(`div`,{key:n,class:e([`message-item`,{"message-right":t.senderId===v.value,"message-left":t.senderId!==v.value}])},[l(`div`,{class:e([`message-bubble`,{"bg-blue-600":t.senderId===v.value,"bg-gray-700":t.senderId!==v.value}])},[t.senderId===v.value?p(``,!0):(a(),u(`div`,Me,[s(r(t.displayName)+` `,1),l(`span`,Ne,`#`+r(t.shortId),1)])),l(`div`,Pe,r(t.text),1),l(`div`,Fe,r(Nt(t.timestamp)),1)],2)],2))),128))],512)]),l(`div`,Ie,[o[18]||=l(`h3`,null,`ì°¸ì—¬ QR ì½”ë“œ`,-1),l(`div`,Le,[l(`div`,{id:`qrcode-chat`,ref_key:`qrcodeChatContainer`,ref:D},null,512)]),yt.value?(a(),u(`a`,{key:0,href:yt.value,target:`_blank`,class:`sidebar-room-link`},r(yt.value),9,Re)):p(``,!0)]),l(`div`,ze,[o[19]||=l(`h3`,null,`ì°¸ì—¬ì`,-1),l(`ul`,Be,[l(`li`,Ve,[s(` ğŸ‘‘ `+r(d(G)||y.value)+` `,1),l(`span`,He,`#`+r(d(ht)||b.value),1),(d(ht)||b.value)===b.value?(a(),u(`span`,Ue,`(ë‚˜)`)):(a(),u(`span`,We,`(ë°©ì¥)`))]),(a(!0),u(m,null,t(gt.value,t=>(a(),u(`li`,{key:t.id,class:e([`guest-item`,{"is-me":t.shortId===b.value}])},[l(`span`,null,[s(`ğŸ‘¤ `+r(t.name)+` `,1),l(`span`,Ge,`#`+r(t.shortId),1)]),t.shortId===b.value?(a(),u(`span`,Ke,`(ë‚˜)`)):p(``,!0)],2))),128))])])],2)],2),l(`div`,{id:`modal`,class:e([`modal-overlay`,{hidden:!ct.value}]),onClick:f(wt,[`self`])},[l(`div`,qe,[l(`h3`,null,r(lt.value),1),l(`p`,null,r(ut.value),1),l(`div`,Je,[dt.value?(a(),u(m,{key:1},[l(`button`,{onClick:Tt,class:`btn-modal-confirm`},`í™•ì¸`),l(`button`,{onClick:wt,class:`btn-modal-cancel`},`ì·¨ì†Œ`)],64)):(a(),u(`button`,{key:0,onClick:wt,class:`btn-modal-ok`},`í™•ì¸`))])])],2),l(`div`,{id:`screen-share-options-modal`,class:e([`modal-overlay`,{hidden:!pt.value}]),onClick:f(Dt,[`self`])},[l(`div`,Ye,[o[22]||=l(`h3`,null,`í™”ë©´ ê³µìœ  ì˜µì…˜`,-1),l(`div`,Xe,[l(`label`,Ze,[n(l(`input`,{type:`checkbox`,"onUpdate:modelValue":o[3]||=e=>I.value.includeAudio=e},null,512),[[re,I.value.includeAudio]]),o[20]||=l(`span`,null,`ì˜¤ë””ì˜¤ë„ ê³µìœ í•˜ê¸°`,-1)]),l(`label`,Qe,[n(l(`input`,{type:`checkbox`,"onUpdate:modelValue":o[4]||=e=>I.value.keepCamera=e},null,512),[[re,I.value.keepCamera]]),o[21]||=l(`span`,null,`ì›¹ìº ë„ í•¨ê»˜ í‘œì‹œí•˜ê¸°`,-1)])]),l(`div`,{class:`modal-actions`},[l(`button`,{onClick:Ot,class:`btn-modal-confirm`},`ì‹œì‘`),l(`button`,{onClick:Dt,class:`btn-modal-cancel`},`ì·¨ì†Œ`)])])],2),l(`div`,{id:`audio-volume-modal`,class:e([`modal-overlay`,{hidden:!mt.value}]),onClick:f(At,[`self`])},[l(`div`,$e,[o[24]||=l(`h3`,null,`ì˜¤ë””ì˜¤ ë³¼ë¥¨ ì¡°ì ˆ`,-1),xt.value.length>0?(a(),u(`div`,et,[(a(!0),u(m,null,t(xt.value,e=>(a(),u(`div`,{key:e.track.id,class:`audio-track-item`},[l(`div`,tt,[l(`span`,nt,r(e.label),1),l(`span`,rt,r(Math.round(e.volume*100))+`%`,1)]),l(`input`,{type:`range`,min:`0`,max:`1`,step:`0.01`,value:e.volume,onInput:t=>Mt(e.track,parseFloat(t.target.value)),class:`volume-slider`},null,40,it)]))),128))])):(a(),u(`div`,at,[...o[23]||=[l(`p`,null,`í˜„ì¬ í™œì„±í™”ëœ ì˜¤ë””ì˜¤ íŠ¸ë™ì´ ì—†ìŠµë‹ˆë‹¤.`,-1)]])),l(`div`,{class:`modal-actions`},[l(`button`,{onClick:At,class:`btn-modal-ok`},`ë‹«ê¸°`)])])],2)])],32))}},[[`__scopeId`,`data-v-be3b77f8`]]);export{h as default};